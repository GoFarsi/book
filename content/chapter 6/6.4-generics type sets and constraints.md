---
title: 6.4 Constraints ู Type Sets
slug: go-generics-type-sets-and-constraints
weight: 11004
---

## ถ.ด.ฑ ููููู constraint ู ููุด ุขู ุฏุฑ ฺูุฑฺฉโูุง

**Constraint** (ูุฏ ุง ูุญุฏูุฏุช) ุฏุฑ ฺูุฑฺฉโูุง Go ุงุจุฒุงุฑ ุงุณุช ุจุฑุง ฺฉูุชุฑู ุงูฺฉู ฺฉ ูพุงุฑุงูุชุฑ ููุน (type parameter) ุจุงุฏ ฺู ูฺฺฏโูุง ุฏุงุดุชู ุจุงุดุฏ.  
ุจุฏูู constraintุ ูุฑ ููุน ูโุชูุงูุฏ ุฌุงฺฏุฒู ุดูุฏุ ุงูุง ุจุง ุชุนุฑู constraintุ ุฏุงุฑูโ ูุฌุงุฒ ุฑุง ูุญุฏูุฏ ูโฺฉูู ุชุง ูู ุงูู ููุน ุจุงูุง ุฑูุฏ ู ูู ุงูฺฉุงูุงุช ุจุดุชุฑ ุจุฑุง ูพุงุฏูโุณุงุฒ ุฏุงุดุชู ุจุงุดู.

#### **ููุด constraint:**

- ุฌููฺฏุฑ ุงุฒ ุงุณุชูุงุฏู ูุงุฏุฑุณุช ุงุฒ ฺูุฑฺฉโูุง (ูุซูุงู ุงุณุชูุงุฏู ุงุฒ ุนููุงุช ุบุฑูุฌุงุฒ ุฑู ููุน ูพุงุฑุงูุชุฑ)
- ุงูุฒุงุด ูุงุจูุช ุชุดุฎุต ุฎุทุง ุฏุฑ ุฒูุงู ฺฉุงููพุงู
- ุงูฺฉุงู ุชุนุฑู abstractionูุง ููโุชุฑ


**ูุซุงู ุณุงุฏู:**

```go
func Sum[T Number](a, b T) T { return a + b }
type Number interface { int | float64 }
```

ุฏุฑ ุงู ูุซุงูุ ููุท ุงููุงุน ฺฉู ุฏุฑ constraint Number ุชุนุฑู ุดุฏูโุงูุฏุ ูุฌุงุฒ ูุณุชูุฏ.

---

## ถ.ด.ฒ interface constraint ู ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ

ุฏุฑ Goุ constraint ูุนูููุงู ุจู ุตูุฑุช ฺฉ interface ุจุงู ูโุดูุฏุ ุงู interface ูโุชูุงูุฏ ุดุงูู ูุชุฏูุง ุง ุชุฑฺฉุจ ุงุฒ ุงููุงุน (type sets) ุจุงุดุฏ.

#### **ูุซุงู: constraint ูุจุชู ุจุฑ ูุชุฏ**

```go
type Stringer interface {
    String() string
}

func PrintString[T Stringer](v T) {
    fmt.Println(v.String())
}
```

ูุฑ ููุน ฺฉู ูุชุฏ `String() string` ุฑุง ุฏุงุดุชู ุจุงุดุฏ (ูุซูุงู time.Time ุง type ุฎูุฏุชุงู)ุ ูโุชูุงูุฏ ุจุฑุง ุงู ุชุงุจุน ุงุณุชูุงุฏู ุดูุฏ.

#### **ูุซุงู: constraint ูุจุชู ุจุฑ type set (union)**

```go
type Numeric interface { int | int64 | float64 }
func Max[T Numeric](a, b T) T {
    if a > b {
        return a
    }
    return b
}
```

ููุท ุงููุงุน ุนุฏุฏ ูุฌุงุฒ ุจู ุงุณุชูุงุฏู ุงุฒ Max ูุณุชูุฏ.

#### **ูุซุงู: ุชุฑฺฉุจ**

```go
type ByteString interface {
    ~[]byte | ~string
}
func FirstChar[T ByteString](s T) byte {
    return s[0]
}
```

ูุฑ ููุน ฺฉู underlying ุขู `[]byte` ุง `string` ุจุงุดุฏุ ูุฌุงุฒ ุงุณุช.

---

## ถ.ด.ณ ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏูุงฺูโูุง anyุ comparable ู Ordered

Go ฺูุฏู constraint ุงุฒ ูพุด ุชุนุฑูโุดุฏู ุฏุงุฑุฏ:

#### **any**

- ูุนุงุฏู interface{}ุ ุนู ูฺ ูุญุฏูุฏุช ูุฌูุฏ ูุฏุงุฑุฏ:

    ```go
    func Identity[T any](v T) T { return v }
    ```


#### **comparable**

- ููุท ููุนโูุง ฺฉู ูโุชูุงู ุจุง == ุง != ููุงุณู ฺฉุฑุฏ (ุจุฑุง map key ุง ูุฌููุนูโูุง):

    ```go
    func Contains[T comparable](slice []T, v T) bool {
        for _, item := range slice {
            if item == v {
                return true
            }
        }
        return false
    }
    ```


#### **Ordered** (ุงุฒ ูพฺฉุฌ cmpุ Go 1.21+)

 ุจุฑุง ุงููุงุน ฺฉู ูโุชูุงู ุงุฒ <, >, <=, >= ุงุณุชูุงุฏู ฺฉุฑุฏ (int, float, string):

  ```go
    import "cmp"
    func Min[T cmp.Ordered](a, b T) T {
        if a < b {
            return a
        }
        return b
    }
```

## ถ.ด.ด ุณุงุฎุช constraint ุณูุงุฑุด ู ุชุฑฺฉุจ (union constraints)

ุดูุง ูโุชูุงูุฏ constraint ุฏูุฎูุงู ุจุณุงุฒุฏ ู ุงููุงุน ูุฎุชูู ุฑุง ุฏุฑ ฺฉ ูุฌููุนู (type set) ูุฑุงุฑ ุฏูุฏ:

#### **ูุซุงู:**

```go
type IDType interface {
    int | int64 | string
}
func ParseID[T IDType](v T) string {
    return fmt.Sprintf("%v", v)
}
```

- ูโุชูุงูุฏ ูุชุฏ ูู ุจู ุขู ุงุถุงูู ฺฉูุฏ:

    ```go
    type ToStringer interface {
        ~string | ~[]byte
        ToString() string
    }
    ```


#### **ูฺฉุชู ููู:**

- ุนูุงูุช `~` ุฏุฑ Go ุจู ุงู ูุนู ุงุณุช ฺฉู ููุน ููุฑุฏ ูุธุฑ ุจุงุฏ **underlying type** ูุดุฎุตโุดุฏู ุฑุง ุฏุงุดุชู ุจุงุดุฏ (ูุซูุงู ููุน ุชุนุฑูโุดุฏูโุง ฺฉู underlying ุขู string ุจุงุดุฏ).
- ุฏุฑ Go 1.24 ุจู ุจุนุฏ ูโุชูุงูุฏ ุญุช **constraint alias** ุชุนุฑู ฺฉูุฏ:

    ```go
    type Num = interface{ int | float64 }
    ```


## ถ.ด.ต Generic Interfaces ู ูุงุจูุชโูุง ุฌุฏุฏ (ุจุฑ ุงุณุงุณ Go 1.21+ ู 1.24)

ฺูุชุฑฺฉ ุงูุชุฑูุณโูุง (Generic Interfaces) ุงุฒ Go 1.18 ุงูฺฉุงูโูพุฐุฑ ุดุฏ ู ุฏุฑ ูุณุฎูโูุง ุฌุฏุฏุ ูุงุจูุชโูุง ููโุชุฑ ุงูุชู ุงุณุช.

### **ถ.ด.ต.ฑ ูพุงุฏูโุณุงุฒ ุงูฺฏููุง abstraction ุจุง interface ฺูุฑฺฉ**

ูโุชูุงูุฏ abstractionูุง ุจุณุงุฒุฏ ฺฉู ุจู ุทูุฑ ฺฉู ุฑู ุงููุงุน ูุฎุชูู ุงุนูุงู ุดููุฏ:

```go
type Comparer[T any] interface {
    Compare(T) int
}

type Sortable[T Comparer[T]] []T

func (s Sortable[T]) Sort() {
    sort.Slice(s, func(i, j int) bool {
        return s[i].Compare(s[j]) < 0
    })
}
```

- ูุฑ ููุน ฺฉู ูุชุฏ `Compare(T) int` ุฑุง ุฏุงุดุชู ุจุงุดุฏุ ูุงุจู ุงุณุชูุงุฏู ุงุณุช.
- ุงู ูุงุจูุช ูุฏุฑุช abstraction ู ุชูุณุนู ฺฉุชุงุจุฎุงููโูุง ุนููู ุฑุง ุจู ุดุฏุช ุงูุฒุงุด ุฏุงุฏู ุงุณุช.

### **ถ.ด.ต.ฒ ูฺฉุงุช ู ฺุงูุดโูุง ูพุดุฑูุชู (ูุซูุงู ูุณุฃูู pointer receivers ู type inference)**

**ุงูู) pointer receivers:**  

ฺฏุงู constraint ุฑู ุงูุชุฑูุณ ุจุงุฏ ุจู ููุน pointer ุจุงุดุฏ ุชุง ูุชุฏูุง ุฏุฑุงูุชโฺฉููุฏู (receiver) ุจู ุฏุฑุณุช ฺฉุงุฑ ฺฉูุฏ.

- ุงฺฏุฑ ูุชุฏูุง ุฑู pointer ุชุนุฑู ุดุฏู ุจุงุดูุฏุ ุจุงุฏ pointer ุจู ุนููุงู ููุน ูพุงุฑุงูุชุฑ ุจุฏูุฏ:

    ```go
    type Setter[T any] interface {
        Set(T)
    }
    func Update[T any, S Setter[T]](s S, v T) { s.Set(v) }
    ```


**ุจ) type inference ุฏุฑ ฺูุฏ ูพุงุฑุงูุชุฑ:**  

ุฏุฑ ุจุฑุฎ ููุงุฑุฏ ฺฉู ฺูุฏู type parameter ูุฌูุฏ ุฏุงุฑุฏ (ูุซูุงู ุจุฑุง abstractionูุง ูพฺุฏู ุง ุชุฑฺฉุจ ฺูุฏ constraint)ุ ููฺฉู ุงุณุช inference ููุน ูพฺุฏู ุดูุฏ ู ูุงุฒู ุจุงุดุฏ type parameters ุฑุง ุจู ุตุฑุงุญุช ูุดุฎุต ฺฉูุฏ.

**ุฌ) ููุงุณู ุจุง ุฒุจุงูโูุง ุฏฺฏุฑ:**  

ุฏุฑ Go ุณุน ุดุฏู ุชุง ุญุฏ ุงูฺฉุงู inference ุณุงุฏู ู ุดูุงู ุจุงุดุฏุ ุงูุง ุฏุฑ abstractionูุง ุฎู ูพฺุฏู (ูุงููุฏ ฺูุฑฺฉ ุชู ุฏุฑ ุชูุ pointer receivers ุง interface embedding) ููฺฉู ุงุณุช ุฎูุงูุง ุงูุถุงูุง (signature) ฺฉู ุณุฎุช ุดูุฏุ ุจู ุฎุตูุต ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู ุชุงุฒูโฺฉุงุฑ.

**ุฏ) ูฺฉุชู ุชููุฏ:**  

ุชุง ุญุฏ ุงูฺฉุงู constraintูุง ุฑุง ุณุงุฏูุ ฺฏูุง ู ุฎูุงูุง ูฺฏู ุฏุงุฑุฏ. constraintูุง ุชุฑฺฉุจ ู abstractionูุง ฺูุฑฺฉ ุฑุง ููุท ุฒูุงู ุจู ฺฉุงุฑ ุจุจุฑุฏ ฺฉู ูุงูุนุงู ูุงุฒ ุงุณุช ู ูุณุชูุฏุณุงุฒ ฺฉุงู ุฏุงุดุชู ุจุงุดุฏ.


## ถ.ด.ถ ุจุฑุฑุณ ุนูู constraints ุฏุฑ Go

ุฏุฑ Goุ ูุฑฺูุฏุฑ ุขุฒุงุฏ ุฏุฑ ุงูุชุฎุงุจ ููุน ูพุงุฑุงูุชุฑ ุจุดุชุฑ ุดูุฏุ ูุฏุฑุช ุงุณุชูุงุฏู ุงุฒ ุขู ฺฉูุชุฑ ุฎูุงูุฏ ุจูุฏ. ุจูุงุจุฑุงูุ ุงุฒ ูุญุฏูุฏุชโูุง ุฏูู ุจุฑุง **ุงูุฒุงุด ูุงุจูุชโูุง ฺูุฑฺฉโูุง** ุงุณุชูุงุฏู ูโฺฉูู. ุฏุฑ ูุงูุนุ ุจู ุฌุง `[T any]`ุ ุจุงุฏ constraint ููุงุณุจ ุงูุชุฎุงุจ ุดูุฏ ฺฉู ฺฉุงููพุงูุฑ ุจุฏุงูุฏ ฺู ุนููุงุช ุฑู `T` ูุฌุงุฒ ุงุณุช.

> ูุงุนุฏู ฺฉู: ูุฑฺู interface ุง constraint ุจุฒุฑฺฏโุชุฑ ุจุงุดุฏุ abstraction ุถุนูโุชุฑ ุงุณุช.

### โ ฺุฑุง `[T any]` ูุญุฏูุฏุช ุฏุงุฑุฏุ

ุจุง ุชุนุฑู ุชุงุจุน ุณุงุฏู ูุซู:

```go
func Add[T any](a, b T) T {
    return a + b
}
```

ฺฉุงููพุงูุฑ Go ุฎุทุง ูโุฏูุฏ ฺูู ุงุฒ `T any` ููโุฏุงูุฏ ุขุง `T` ูุงุจูุช ุนููฺฏุฑ `+` ุฑุง ุฏุงุฑุฏ ุง ุฎุฑ. ุจูุงุจุฑุงู ููโุชูุงูุฏ ฺฉุฏ ุฑุง ฺฉู ูุนุชุจุฑ ุจุงุดุฏ ุชููุฏ ฺฉูุฏ. ุงู ูุดุงู ูโุฏูุฏ ฺฉู ุขุฒุงุฏ ุจุด ุงุฒ ุญุฏ ุจุงุนุซ ุญุฐู ูุงุจูุชโูุง ููู ูโุดูุฏ.

### ุงููุงุน constraint ุฏุฑ Go

#### ฑ. **Basic Interface Constraint** (ูุญุฏูุฏุช ุจุฑ ูพุงู ูุชุฏ)

ุงู ููุน constraint ุดุงูู ูุชุฏูุง ุงุณุช ฺฉู ุจุงุฏ ุชูุณุท ููุน ูพุงุฏูโุณุงุฒ ุดูุฏ.

ูุซุงู:

```go
func Stringify[T fmt.Stringer](v T) string {
    return v.String()
}
```

ุงูุฌุง ฺฉุงููพุงูุฑ ูโุฏุงูุฏ ฺฉู `v` ูุชุฏ ุจู ูุงู `String()` ุฏุงุฑุฏุ ุจูุงุจุฑุงู ูโุชูุงูุฏ ุขู ุฑุง ุจุฏูู ุฎุทุง ุงุฌุฑุง ฺฉูุฏ.

#### ฒ. **Type Set Constraint** (ูุญุฏูุฏุช ูุณุช ุจุฑุง ุนููฺฏุฑูุง)

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑูุง ูุซู `+`ุ ุจุงุฏ `T` ุฑุง ูุญุฏูุฏ ฺฉูู ุชุง ูุฌููุนูโุง ุงุฒ ุงููุงุน ูุดุฎุต ุจุงุดุฏ:

```go
type Numeric interface { int | int64 | float64 }

func Add[T Numeric](a, b T) T {
    return a + b
}
```

ุงฺฉููู ฺฉุงููพุงูุฑ ุชุถูู ูโุฏูุฏ ฺฉู `T` ุญุชูุงู ฺฉ ุงุฒ ุงููุงุน ุนุฏุฏ ุงุณุช ู ุนูู `+` ูุนุชุจุฑ ุฎูุงูุฏ ุจูุฏ.

ููฺูู ุจุฑุง ุงุฌุงุฒู ุงุณุชูุงุฏู ุงุฒ `~` ุจุฑุง ูพุฐุฑุด ุฒุฑููุนโูุง:

```go
type Intish interface { ~int }
```

#### ณ. **ุชุฑฺฉุจ ูุญุฏูุฏุชโูุง**

ูโุชูุงู constraintูุง ุณุงุฎุช ฺฉู ฺูุฏ ูุญุฏูุฏุช ุฑุง ููุฒูุงู ุงุนูุงู ฺฉููุฏุ ูุซูุงู ูุชุฏ ู ุนููฺฏุฑ:

```go
type ReadStringer interface {
    fmt.Stringer
    io.Reader
    ~[]byte | ~string
}
```

ุงู ูุญุฏูุฏุช ุจุงู ูโฺฉูุฏ ฺฉู `T` ุจุงุฏ ูู `String()` ุฏุงุดุชู ุจุงุดุฏุ ูู `Read()` ุงุฌุฑุง ฺฉูุฏุ ู ููุน underlying ุขู `[]byte` ุง `string` ุจุงุดุฏ.

### ๐ ุงููุช ู ูพุงูุฏูุง

- **ุฎูุงูุง ู ุงุทููุงู ุจุงูุง:**  
    ุจุง ูุญุฏูุฏ ฺฉุฑุฏู ุฏูู `T` ุชููุง ุจู ุงููุงุน ฺฉู ุนููุงุช ููุฑุฏ ูุธุฑ ุฑุง ุฏุงุฑูุฏุ ุงุฒ ุจุฑูุฒ ุฎุทุง ุฌููฺฏุฑ ูโฺฉูุฏ.

- **ฺฉุงุฑุง ุจุฏูู overhead:**  
    ฺูู ฺฉุงููพุงูุฑ ูโุฏุงูุฏ ุฏููุงู ฺู ุนููุงุช ูุฌุงุฒ ุงุณุชุ ูุงุฒ ุจู reflect ุง ุจุฑุฑุณ ุฏุฑ runtime ูุณุช.

- **ุงุฑุชูุงุก abstraction:**  
    ุชุนุฑู ุณูุณููโูุฑุงุชุจ ุงุฒ constraintูุง ูุงููุฏ `Numeric`, `Ordered`ุ ุง `ReadStringer` ุงูฺฉุงู reuse ู ุฎูุงูุง ุจุงูุงุชุฑ ฺฉุฏ ุฑุง ูุฑุงูู ูโฺฉูุฏ.
    