---
title: '4.22 ฺฉุชุงุจุฎุงูู Plugin'
slug: go-plugin
weight: 7022
---

ุฏุฑ ูุงู ูฺฺฏโูุง ูุงุจู ุชูุฌู Go ูุณุฎู 1.8ุ ุณุณุชู ุฌุฏุฏ ูพูุงฺฏูโูุง Go ูุฑุงุฑ ุฏุงุฑุฏ. ุงู ูฺฺฏ ุจู ุจุฑูุงููโููุณุงู ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุจุฑูุงููโูุง ูุงฺููุงุฑ ุจุฏูู ุงุฑุชุจุงุท ุฒูุฌุฑูโุง ุจุง ููุ ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุณุชูโูุง ฺฉู ุจู ุตูุฑุช ฺฉุชุงุจุฎุงููโูุง ุงุดุง ุดุกโฺฏุฑุง ฺฉุงููพุงู ุดุฏูโุงูุฏุ ุณุงุฎุชู ุดููุฏ ู ุจูโุตูุฑุช ูพูุง ุฏุฑ ุฒูุงู ุงุฌุฑุง ุจุงุฑฺฏุฐุงุฑ ู ุจูโุตูุฑุช ูพูุณุชู ุจู ุขูโูุง ูพููุฏ ุฏุงุฏู ุดููุฏ.

ุงู ุชุบุฑ ุจุฒุฑฺฏ ุงุณุช! ฺุฑุง ฺฉู ุชูุณุนูโุฏููุฏฺฏุงู ูุฑูโุงูุฒุงุฑูุง ุณุณุชู ุจุฒุฑฺฏ ุฏุฑ Goุ ุจุฏูู ุดฺฉุ ูุงุฒ ุจู ูุงฺููุงุฑุณุงุฒ ฺฉุฏ ุฎูุฏ ุฏุงุฑูุฏ. ูุง ุจุฑุง ุฏุณุชุงุจ ุจู ูุงฺููุงุฑุณุงุฒ ฺฉุฏุ ุงุฒ ุทุฑุงุญโูุง ูุชุนุฏุฏ out-of-processุ ูุงููุฏ [OS exec calls](https://kubernetes.io/docs/admin/network-plugins/)ุ [ุณูฺฉุช](https://docs.docker.com/engine/extend/plugin_api/) ู [RPC/gRPC](https://github.com/hashicorp/go-plugin) (ู ุบุฑู) ุงุณุชูุงุฏู ฺฉุฑุฏูโุงู. ุงู ุฑูุดโูุง ููฺฉู ุงุณุช ุจู ุฎูุจ ฺฉุงุฑ ฺฉููุฏุ ุงูุง ุฏุฑ ุจุณุงุฑ ุงุฒ ุฒูููโูุง ุจูโุนููุงู ูพุงุงููโุง ุจุฑุง ูพุฑุฏุงุฒุด ุจุง ูุจู ูุจูุฏ ฺฉ ุณุณุชู ูพูุงฺฏูโุง ูุงุชู ุฏุฑ Go ุจฺฉุงุฑ ุฑูุชูโุงูุฏ.

ุฏุฑ ุงู ุจุฎุด ุงุฒ ฺฉุชุงุจุ ูู ุจุฑุฑุณ ูโฺฉูู ฺฉู ุงุฌุงุฏ ูุฑูโุงูุฒุงุฑ ูุงฺููุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ูพูุงฺฏูโูุง Go (plugin) ฺู ุชุจุนุงุช ุฏุงุฑุฏ.

{{< hint warning >}}
ุงุฒ ูุณุฎู 1.8ุ plugin ููุท ุฏุฑ ูููฺฉุณ ฺฉุงุฑ ูโฺฉูุฏ. ุจุง ุชูุฌู ุจู ุณุทุญ ุนูุงูููุฏ ุจู ุงู ูฺฺฏุ ุงู ุงุญุชูุงูุง ุฏุฑ ูุณุฎูโูุง ุขูุฏู ุชุบุฑ ุฎูุงูุฏ ฺฉุฑุฏ.
{{< /hint >}}

## 4.22.1 ุทุฑุงุญ ูุงฺููุงุฑ ุจุง Go

ุงุฌุงุฏ ุจุฑูุงููโูุง ูุงฺููุงุฑ ุจุง ูพูุงฺฏู๏ปฟโูุง Goุ ูุงุฒ ุจู ููุงู ุดูู ฺฉุงุฑ ูุงุจู ุงุนุชูุงุฏ ูุฑูโุงูุฒุงุฑ ุฏุงุฑุฏ ฺฉู ุจู ุจุณุชูโูุง Go ุฑุงุฌ ุงุนูุงู ูโุดูุฏ. ุจุง ุงูโุญุงูุ ูพูุงฺฏูโูุง ูฺฏุฑุงูโูุง ุทุฑุงุญ ุฌุฏุฏ ุฑุง ุจุง ุชูุฌู ุจู ุงุชุตุงูุดุงู ุจู ุฏฺฏุฑ ุงุฌุฒุง ุจุฑูุงููุ ุจุดุชุฑ ฺฉุฑุฏูโุงูุฏ.

1. ุฏุฑ ููฺฏุงู ุณุงุฎุช ุณุณุชู ูุฑูโุงูุฒุงุฑ ูุงุจู ูพูุงฺฏูโฺฏุฐุงุฑุ ุจุณุงุฑ ููู ุงุณุช ฺฉู ูุงุจูุชโูุง ูุงุถุญ ุจุฑุง ุงุฌุฒุง ุณุณุชู ุชุนุฑู ุดููุฏ. ุณุณุชู ุจุงุฏ ุฑุงุจุทโูุง ุณุงุฏู ู ุดูุงู ุจุฑุง ฺฉูพุงุฑฺูโุณุงุฒ ูพูุงฺฏู ูุฑุงูู ฺฉูุฏ. ุงุฒ ุณู ุฏฺฏุฑุ ุชูุณุนูโุฏููุฏฺฏุงู ูพูุงฺฏู ุจุงุฏ ุจู ุนููุงู ฺฉ ุฌุนุจู ุณุงู ุจุฑุง ุณุณุชู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดููุฏ ู ุนูุงูู ุจุฑ ูุฑุงุฑุฏุงุฏูุง ุงุฑุงุฆูโุดุฏูุ ูฺ ูุฑุถุงุช ุฑุง ุงูุฌุงู ูุฏููุฏ.
2. ูพูุงฺฏู ุจุงุฏ ุจู ุนููุงู ฺฉ ุงุฌุฒุง ูุณุชูู ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ ฺฉู ุงุฒ ุฏฺฏุฑ ุงุฌุฒุง ุฌุฏุง ุดุฏู ุงุณุช. ุงู ุจุงุนุซ ูโุดูุฏ ฺฉู ูพูุงฺฏูโูุง ุจุชูุงููุฏ ุฏูุฑูโ life cycle ุชูุณุนู ู ุงุณุชูุฑุงุฑ ุฎูุฏ ุฑุง ุจุฏูู ูุงุจุณุชฺฏ ุจู ูุตุฑูโฺฉููุฏฺฏุงูุดุงู ุฏูุจุงู ฺฉููุฏ.
3. ฺฉุฏ ูพูุงฺฏู ุจุงุฏ ุทุฑุงุญ ุดูุฏ ุชุง ุชูุฑฺฉุฒ ุฎูุฏ ุฑุง ููุท ุจุฑ ุฑู ฺฉ ุงุฒ ูุณุงุฆู ุนููฺฉุฑุฏ ุฏุงุดุชู ุจุงุดุฏ ู ูู ุจุดุชุฑ ุงุฒ ุขู.
4. ุงุฒ ุขูุฌุง ฺฉู ูพูุงฺฏูโูุง ุงุฌุฒุง ูุณุชููโุง ูุณุชูุฏ ฺฉู ุฏุฑ ุฒูุงู ุงุฌุฑุง ุจุงุฑฺฏุฑ ูโุดููุฏุ ููู ุงู ุงุณุช ฺฉู ุงุฒ ูุณุชูุฏุงุช ุฎูุจ ุจุฑุฎูุฑุฏุงุฑ ุจุงุดูุฏ. ุจู ุนููุงู ูุซุงูุ ูุงู ุชูุงุจุน ู ูุชุบุฑูุง ูพุงุฏู ุณุงุฒ ุจุงุฏ ุจู ุทูุฑ ูุงุถุญ ูุดุฎุต ุดููุฏ ุชุง ุฎุทุงูุง ุฌุณุชุฌู symbol ูุง ุฑุง ุฌููฺฏุฑ ฺฉููุฏ.
5. ูพูุงฺฏูโูุง Go ูโุชูุงููุฏ ุชุงุจุนโูุง ุจุณุชู ู ูุชุบุฑูุง ุงุฒ ูุฑ ููุน ุฑุง ุจูโุตูุฑุช ุฎุฑูุฌ ุฏููุฏ. ูโุชูุงูุฏ ูพูุงฺฏูโุชุงู ุฑุง ุทุฑุงุญ ฺฉูุฏ ุชุง ูุงุจูุชโูุง ุฎูุฏ ุฑุง ุจูโุตูุฑุช ฺฉ ูุฌููุนูโ ุชุงุจุนโูุง ุขุฒุงุฏ ฺฏุฑููโุจูุฏ ฺฉูุฏ. ุณุฑุฏุฑฺฏูุ ุงู ุงุณุช ฺฉู ุดูุง ุจุงุฏ ุจูโุตูุฑุช ุฌุฏุงฺฏุงูู ูุฑ symbol ุชุงุจุน ุฑุง ุฌุณุชุฌู ู ุจู ุขู ูุชุตู ุดูุฏ. ุฑุงูฺฉุงุฑ ุจูุชุฑ ุงู ุงุณุช ฺฉู ุงุฒ ุงููุงุน interface ุงุณุชูุงุฏู ฺฉูุฏ. ุงุฌุงุฏ ฺฉ interface ุจุฑุง ุตุงุฏุฑฺฉุฑุฏู ูุงุจูุชโูุงุ ฺฉ ุณุทุญ ุชุนุงูู ฺฉููุงุฎุช ู ูุฎุชุตุฑ ุจุง ูุดุงูฺฏุฑูุง ุนููุงุช ูุงุถุญ ูุฑุงูู ูโฺฉูุฏ. ุฌุณุชุฌู ู ูุชุตู ฺฉุฑุฏู ุจูโููุงุฏ ฺฉู ุจู ฺฉ ุฑุงุจุท ุญู ูโุดูุฏุ ุฏุณุชุฑุณ ุจู ฺฉู ูุฌููุนู ุดูู ูุง ุชุงุจุน ุจุฑุง ูุงุจูุชโูุง ุฑุง ูุฑุงูู ูโฺฉูุฏุ ูู ููุท ฺฉ ุงุฒ ุขูโูุง.


## 4.22.2 ฺฉุชุงุจุฎุงูู plugin

ฺฉุชุงุจุฎุงูู pluginุ ฺฉ ฺฉุชุงุจุฎุงูู ุฎู ุณุงุฏู ู ุขุณุงู ุงุณุช ู ููุท ฺฉ ุชุงุจุน Open ู ฺฉ ูุชุฏ Lookup ุฏุงุฑุฏ ฺฉู ุจู ุดูุง ุจุฑุง ุจุงุฒฺฉุฑุฏู ูุงู so. ู ุงุณุชูุงุฏู ุงุฒinterface ูุง ูพุงุฏู ุณุงุฒ ุดุฏู ฺฉูฺฉ ู ฺฉูุฏ.

```go
type Plugin
	func Open(path string) (*Plugin, error)
	func (p *Plugin) Lookup(symName string) (Symbol, error)
	
type Symbol
```

ฺฉุชุงุจุฎุงูู pluginุ ฺฉ ูพฺฉุฌ ุงุตู Go ุจุง ุชูุงุจุน ู ูุชุบุฑูุง ุตุงุฏุฑุดุฏู ุงุณุช ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจุฑุง ฺฉุงููพุงู ุณุงุฎุชู ุดุฏู ุงุณุช:

```shell
$ go build -buildmode=plugin
```


ููุช ฺฉู ฺฉ plugin ุจุฑุง ุงููู ุจุงุฑ ุจุงุฒ ูโุดูุฏุ ุชุงุจุน init ุชูุงู ุจุณุชูโูุง ฺฉู ูููุฒ ูุณูุช ุจุฑูุงูู ูุณุชูุฏ ูุฑุงุฎูุงู ูโุดููุฏ. ุชุงุจุน ุงุตู ุงุฌุฑุง ููโุดูุฏ. ฺฉ plugin ุชููุง ฺฉุจุงุฑ ููุฏุงุฑุฏู ุงููู ูโุดูุฏ ู ููโุชูุงูุฏ ุจุณุชู ุดูุฏ.


## 4.22.3 ูพุงุฏู ุณุงุฒ ูุฏู ุจู ูุฏู ฺฉ ุจุฑูุงูู ูุงฺููุงุฑ ุจุง plugin

ูุฑุถ ฺฉูุฏ ูุตุฏ ฺฉ ูพุฑูฺู ุจููุณู ฺฉู hello world ุฑุง ุจู ุฒุจุงู ูุง ูุฎุชูู ุฏุฑ ุฎุฑูุฌ terminal ฺุงูพ ฺฉูู.

### 4.22.3.1 ููููู ุณุงุฎุชุงุฑ ูพุฑูฺู

ุฏุฑ ุงุจุชุฏุง ูุงุฒ ุฏุงุฑู ฺฉ ูพุฑูฺู ุจุง ุณุงุฎุชุงุฑ ุฒุฑ ูพุงุฏู ุณุงุฒ ฺฉูู:

```shell
โโโ [   22]  go.mod
โโโ [  779]  main.go
โโโ [  224]  plugin
    โโโ [  240]  en
    โยย โโโ [  152]  en.go
    โโโ [  240]  fa
        โโโ [  155]  fa.go
```

### 4.22.3.2 ููุดุชู ูพูุงฺฏู

ุฏุฑ ุงุจุชุฏุง ฺฉ ุฏุงุฑฺฉุชูุฑ plugin ุงุฌุงุฏ ฺฉูุฏ ุณูพุณ ุจุฑุงุณุงุณ ุฒุจุงู ููุฑุฏ ูุธุฑ ุฎูุฏ ฺฉ ุง ฺูุฏ sub directory ุงุฌุงุฏ ฺฉูุฏ.

ุญุงู ุจุฑุง ุฒุจุงู ูุงุฑุณ ู ุงูฺฏูุณ ุงุฒ ฺฉุฏ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

**English**
```go
package main  
  
import "fmt"  
  
type hello string  
  
func (h hello) Hello() {  
fmt.Println("Hello ๐")  
}  
  
// Hello exported as symbol named
var Hello hello
```

**Persian**
```go
package main  
  
import "fmt"  
  
type hello string  
  
func (h hello) Hello() {  
fmt.Println("ุณูุงู ๐")  
}  
  
// Hello exported as symbol named
var Hello hello
```

ุฏุฑ ฺฉุฏ ููู ูุง ุจู ุงุฒุง ูุฑ ุฒุจุงู ฺฉ ูุงู go ุงุฌุงุฏ ฺฉุฑุฏู ฺฉู ุจุง ูพฺฉุฌ main ุดุฑูุน ู ุดูุฏ ู ุฏุงุฎูุด ฺฉ type ูุดุฎุต ูุฑุงุฑ ุฏุงุฏู ู ูุชุฏ Hello ุฑุง ูพุงุฏู ุณุงุฒ ฺฉุฑุฏู.
ุณูพุณ ฺฉ ูุชุบุฑ ุจุง ูุงู Hello ุชุนุฑู ฺฉุฑุฏู ุชุง ุจู ุนููุงู symbol ุจุฑุง ูพูุงฺฏู ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ.


{{< hint warning >}}
ุงฺฏุฑ package ุดูุง ูุงู ุฏฺฏุฑ ุบุฑ ุงุฒ main ุจุงุดุฏ ุจุง ุฎุทุง ููุงุฌู ุฎูุงูุฏ ุดุฏ ุจู ุฏูู build ุดุฏู ูุงฺูู ูุณุชุด.

```shell
-buildmode=plugin requires exactly one main package
```
{{< /hint >}}


### 4.22.3.3 ุจูุฏ ูพูุงฺฏู ูุง

ุจุฑุง ุจูุฏ ฺฏุฑูุชู ูพูุงฺฏู ูุง ุจุงุฏ ุงุฒ ุฏุณุชูุฑุงุช ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```shell
go build -buildmode=plugin -o plugin/en/en.so plugin/en/en.go 

 go build -buildmode=plugin -o plugin/fa/fa.so plugin/fa/fa.go
```

ุฒูุงูฺฉู ุจูุฏ ูฺฏุฑุฏ ูุงู ูพูุงฺฏู ูุง ุฏุฑ ูุญู `plugin/en` ุง `plugin/fa` ุจุง ูพุณููุฏ `so.` ูุฑุงุฑ ูฺฏุฑุฏ.

ุญุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑ file ุฏุฑ ูููฺฉุณ ู ุชูุงูุฏ ุงุทูุงุนุงุช ูุงฺูู ุจูุฏ ุดุฏู ุฑุง ุจุจูุฏ ฺฉู ุจู ุนููุงู dynamic shared object ุดูุงุฎุชู ู ุดูุฏ:

```shell
$ file plugin/en/en.so 
plugin/en/en.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=d23f35974563f658267b158466cbb551a97fb049, with debug_info, not stripped
```

**ุณุงุฎุชุงุฑ ูพุฑูฺู ูพุณ ุงุฒ ุจูุฏ ูพูุงฺฏู ูุง**

```shell
โโโ [   22]  go.mod
โโโ [  779]  main.go
โโโ [  224]  plugin
    โโโ [  240]  en
    โยย โโโ [  152]  en.go
    โยย โโโ [ 3.5M]  en.so
    โโโ [  240]  fa
        โโโ [  155]  fa.go
        โโโ [ 3.5M]  fa.so


```

### 4.22.3.4 ุงุณุชูุงุฏู ุงุฒ ูพูุงฺฏู ูุง

ุฏุงุฎู ุฑูุช ูพุฑูฺู ฺฉ ูุงู main.go ุงุฌุงุฏ ฺฉูุฏ ู ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ุฏูุฏ.

ุชูุฌู ฺฉูุฏ ูุงุฒ ุฏุงุฑุฏ ูุงู ูุง ูพูุงฺฏู ุฑุง ุฏุฑ ูุฑ ูุญู ูุณุช load ฺฉูุฏ.

```go
package main

import (
	"fmt"
	"os"
	"plugin"
)

type Greeter interface {
	Hello()
}

func main() {
	// determine plugin to load
	lang := "english"
	if len(os.Args) == 2 {
		lang = os.Args[1]
	}
	var mod string
	switch lang {
	case "english":
		mod = "./plugin/en/en.so"
	case "persian":
		mod = "./plugin/fa/fa.so"
	default:
		fmt.Println("don't support your language")
		os.Exit(1)
	}

	// load module
	plug, err := plugin.Open(mod)
	if err != nil {
		fmt.Println(err)
		os.Exit(1)
	}

	// lookup for symbol
	symbol, err := plug.Lookup("Hello")
	if err != nil {
		fmt.Println(err)
		os.Exit(1)
	}

	// assert symbol with interface
	p, ok := symbol.(Greeter)
	if !ok {
		fmt.Println("unexpected type from module symbol")
		os.Exit(1)
	}

	// call interface method
	p.Hello()

}
```

```shell
$ go run main.go english
Hello ๐
```

- ุฏุฑ ุงุจุชุฏุง ฺฉ interface ุจู ููุฑุงู ูุชุฏ ูุดุงุจู ุฏุงุฎู ูพูุงฺฏู ูุฑุงุฑ ุฏุงุฏู.
- ุณูพุณ ุฏุงุฎู main ฺฉ ุฒุจุงู ูพุด ูุฑุถ ุฑุง ุฏุงุฎู ูุชุบุฑ lang ุชุนู ฺฉุฑุฏู ุณูพุณ ุงุฒ ุทุฑู os.Args ุฒุจุงู ุงุฒ ุทุฑู os.Stdin ฺฏุฑูุชู ู ุฏุงุฎู lang ูุฑุงุฑ ุฏุงุฏู ูพุณ ุงุฒ ุขู ุจุง ุงุณุชูุงุฏู ุงุฒ switch ฺฺฉ ฺฉุฑุฏู ุจุฑุงุณุงุณ ุฒุจุงู ฺฉ ูพูุงฺฏู ุง ูุงฺูู ูุดุฎุต ุฑุง ุฏุงุฎู ูุชุบุฑ  mod ูุณุฑ ุฏู ฺฉูู.
- ุณูพุณ ุชุงุจุน Open ฺฉุชุงุจุฎุงูู plugin ุฑุง ูุฑุงุฎูุงู ฺฉุฑุฏู ู ูุณุฑ ูพูุงฺฏู ุฑุง ูุฑุงุฑ ุฏุงุฏู.
- ุญุงู ูพุณ ุงุฒ ุจุงุฒ ุดุฏู ูพูุงฺฏู ูุชุฏ Lookup ุฑุง ุจุฑุง ูพุฏุง ฺฉุฑุฏู symbol ูุฑุงุฎูุงู ฺฉุฑุฏู ฺฉู ูุง ูุงู symbol ุฑุง Hello ฺฏุฐุงุดุชู.
- ูพุณ ุงุฒ ุงูฺฉู symbol ุจุฏูู ุฎุทุง load ุดุฏ ูุง symbol ุฑุง ุจุง ุงูุชุฑูุณ Greeter ฺฏุฑูุชู Assert ฺฉุฑุฏู ุชุง ุจุชูุงูู ุงุฒ ูุชุฏูุง ูพุงุฏู ุณุงุฒ ุดุฏู ุงุณุชูุงุฏู ฺฉูู.


## 4.22.4 ูพุฑูฺู ูุง ฺฉู ุงุฒ plugin ุงุณุชูุงุฏู ฺฉุฑุฏู ุงูุฏ

ุฏุฑ ุฒุฑ ูุง ูุณุช ุงุฒ ูพุฑูฺู ูุง ูุนุงู ฺฉู ุงุฒ ูพูุงฺฏู ุงุณุชูุงุฏู ฺฉุฑุฏู ุงูุฏ ุฑุง ูุฑุงุฑ ุฏุงุฏู ุชุง ุจุชูุงูุฏ ุจุฑุง ูพุงุฏู ุณุงุฒ ูพุฑูฺู ูุง ูุงฺููุงุฑ ุงุฏู ุจฺฏุฑุฏ:

1. https://github.com/hashicorp/go-plugin
2. https://github.com/luraproject/lura
3. https://github.com/smartcontractkit/chainlink-starknet
4. https://github.com/ava-labs/blobvm
5. https://github.com/easysoft/zentaoatf


## 4.22.5 ฺฉูุงู ุขุฎุฑ

ูุงฺููุงุฑููุณ ฺฉ ุงุฒ ููู ุชุฑู ุนูุงูู ุชูุณุนู ู ุทุฑุงุญ ูุฑู ุงูุฒุงุฑ ุจูุฏู ฺฉู ุดูุง ุจุง ุงูฺฉุงุฑ ู ุชูุงูุฏ ูพูุงฺฏู ูุง reusable ุจููุณุฏ ู ุฏุฑ ูุฑ ูพุฑูฺู ุง ุจุณุชู ุจู ูุงุฒุชุงู ุงุณุชูุงุฏู ฺฉูุฏ.
ุดุฑฺฉุช ูุง ุจุฒุฑฺฏ ูุธุฑ hashicorp ุจุฑุง ุงฺฉุซุฑ ูพุฑูฺูุงุด ูุธุฑ terraform ุง consul ุงุฒ ุงู ูุงุจูุช ุงุณุชูุงุฏู ฺฉุฑุฏู ุงุณุช.