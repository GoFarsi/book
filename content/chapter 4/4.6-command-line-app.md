---
title: '4.6 آموزش نوشتن برنامه command line'
slug: command-line-go
weight: 7006
---

## 4.6.1 مقدمه

هنگامی که می‌خواهید نرم‌افزاری بنویسید، ممکن است بخواهید از محیط Command Line یا خط فرمان استفاده کنید. خط فرمان، رابط کاربری ساده‌تری نسبت به محیط گرافیکی دارد و در برخی موارد، سرعت بخش بسیار قابل توجهی است. برای آموزش نوشتن برنامه در خط فرمان، شما به یک زبان برنامه‌نویسی نیاز دارید که از بسیاری از کانسپت‌هایی که در برنامه‌نویسی استفاده می‌شوند، پشتیبانی کند. ما به شما پیشنهاد می‌دهیم که از زبان برنامه‌نویسی Go استفاده کنید زیرا برای کار با Command Line بسیار مناسب است.

آموزش نوشتن برنامه Command Line به کمک زبان برنامه‌نویسی گو:

در اینجا، ما یک مثال ساده از برنامه Hello World با استفاده از Go و Command Line ارائه می‌دهیم. این برنامه، یک پیام ساده را به صفحه نمایش خط فرمان چاپ می‌کند.

اولین چیزی که شما باید در نظر داشته باشید این است که برنامه‌ی شما باید یک فایل با پسوند .go باشد. برای مثال، می‌توانید یک فایل با نام helloworld.go ایجاد کنید.

بعد از ایجاد فایل، شما باید کد زیر را به فایل خود اضافه کنید:

{{< play >}}
package main

import "fmt"

func main() {
	fmt.Println("Hello, World!")
}
{{< /play >}}

اگر کد بالا را به فایل helloworld.go اضافه کردید، می‌توانید با استفاده از Command Line، فایل را اجرا کنید. برای اجرای فایل، ابتدا باید به دایرکتوری فایل برید. سپس می‌توانید دستور برای اجرای فایل را وارد کنید.

برای مثال، فرض کنید فایل helloworld.go در دایرکتوری Documents قرار دارد. به عنوان نوشته، این دستورات را در Command Line وارد کنید:

$ cd Documents
$ go run helloworld.go

با اجرای دستور بالا، برنامه شما اجرا خواهد شد و پیام "Hello, World!" را در Command Line چاپ می‌کند.

نتیجه‌گیری:

استفاده از خط فرمان برای نوشتن برنامه‌های شما می‌تواند بسیار مفید باشد، اگر یادگیری زبان برنامه‌نویسی Go و چگونگی کار با Command Line را یاد بگیرید. در این مقاله، به شما یک مثال ساده از نوشتن برنامه Command Line با استفاده از Go برای شروع ارائه شد. با ادامه‌ی یادگیری زبان برنامه نویسی Go، شما می‌توانید برنامه‌های پیچیده‌تر را با استفاده از Command Line بسازید.

## 4.6.2 نحوه گرفتن arguments به عنوان ورودی از ترمینال

برای گرفتن ورودی از Command Line به عنوان Argument در یک برنامه Go، شما می‌توانید از پایگاه‌داده os در Go استفاده کنید. برای دسترسی به Argumentها، شما می‌توانید متغیرهای os.Args را استفاده کنید. آرایه‌ی os.Args شامل تمامی Argumentهایی است که در Command Line به برنامه شما داده شده است. در زیر، یک مثال ساده از گرفتن دو Argument از Command Line در یک برنامه Go آورده شده است:

{{< play >}}
package main

import (
	"fmt"
	"os"
)

func main() {
	args := os.Args
	fmt.Println("First Argument:", args[1])
	fmt.Println("Second Argument:", args[2])
}
{{< /play >}}

در کد بالا، ابتدا، ما متغیر os.Args را به متغیر args اختصاص داده‌ایم. سپس، با استفاده از این متغیر، ما مقادیر دو Argument اول را چاپ کرده‌ایم. در اینجا، args[0] نام برنامه Go در Command Line است، بنابراین اولین Argument بعد از آن در args[1] و دومین Argument در args[2] قرار دارد. با تغییر این شماره‌ها، شما می‌توانید به Argument‌های دیگر در Command Line دسترسی داشته باشید.

## 4.6.3 کار با flag در زبان گو

در زبان Go، شما می‌توانید از پکیج flag برای ایجاد و مدیریت Flagها در Command Line استفاده کنید. با استفاده از قابلیت Flag، شما می‌توانید به آرگومان های اختیاری و پارامترهای Command Line برنامه خود دسترسی پیدا کنید.

در پکیج flag، سه نوع Flag مختلف وجود دارند: string، bool و int. برای ایجاد یک Flag از هر نوع، می‌توانید از توابع flag.String، flag.Bool و flag.Int استفاده کنید.

در مثال زیر، ما به کمک Flag یک رشته، یک boolean و یک integer را تعریف و مقداردهی اولیه آن‌ها را انجام می‌دهیم:

{{< play >}}
package main

import (
	"flag"
	"fmt"
)

func main() {
	// تعریف یک Flag رشته برای نام کاربری
	userName := flag.String("username", "", "نام کاربری")

	// تعریف یک Flag boolean برای پرینت نتیجه
	printResult := flag.Bool("print", false, "پرینت نتیجه؟")

	// تعریف یک Flag integer برای تعداد تکرار
	repeatCount := flag.Int("count", 1, "تعداد تکرار")

	flag.Parse()

	// استفاده از Flag ها
	fmt.Println("نام کاربری:", *userName)
	fmt.Println("پرینت نتیجه؟", *printResult)
	fmt.Println("تعداد تکرار:", *repeatCount)
}
{{< /play >}}


در مثال بالا، ما سه Flag ایجاد کرده‌ایم: username، print و count که به ترتیب متناظر با یک رشته، یک boolean و یک integer هستند. پارامتر اول تابع هر Flag نام آن است، پارامتر دوم مقدار پیش‌فرض و پارامتر سوم توضیحاتی در مورد Flag است.

در انتهای برنامه، با استفاده از تابع flag.Parse()، مقدار داده‌شده به Flagها از Command Line دریافت و مقداردهی به متغیرهای var استفاده شده در Flagها انجام می‌گیرد. در مثال بالا، ما با استفاده از اپراتور * به مقدار داده‌شده به هر Flag دریافت شده از Command Line دسترسی پیدا می‌کنیم.

با اجرای برنامه و وارد کردن یک Command Line مخصوص مثل زیر، می‌توانید مقدارهای مختلفی به Flagهای برنامه خود اختصاص دهید.

```shell
go run main.go -username=John -print=true -count=5
```

در این مثال، مقدار Flag username برابر با "John"، print برابر با true و count برابر با ۵ می‌باشد.

همچنین قابل ذکر است که سه مدل Flag دیگر در پکیج flag وجود دارند که عبارتند از: 
flag.StringVar، flag.BoolVar و flag.IntVar. تفاوت این Flag ها با Flag های قبلی این است
که یک آرگومان اضافی به عنوان اولین آرگومان دریافت می کنند که مقدار تعیین شده برای
Flag به داخل این آرگومان ریخته می شود. در زیر یک مثال نسبتا واقعی در مورد کانفیگ
اولیه برنامه با استفاده از StringVar آمده است:

{{< play >}}
package main

import (
	"flag"
	"fmt"
)

type application struct {
	DSN          string
	Domain       string
	JWTSecret    string
	JWTIssuer    string
	JWTAudience  string
	CookieDomain string
	APIKey       string
}

func main() {
	// تعریف یک متغیر از جنس ساختار application
	var app application

	// پر کردن فیلد های ساختار با استفاده از flag.StringVar
	flag.StringVar(&app.DSN, "dsn", "host=localhost port=5432 user=postgres password=postgres dbname=yourdbname sslmode=disable timezone=UTC connect_timeout=5", "postgres connection string")
	flag.StringVar(&app.JWTSecret, "jwt-secret", "verysecret", "signing secret")
	flag.StringVar(&app.JWTIssuer, "jwt-issuer", "example.com", "signing issuer")
	flag.StringVar(&app.JWTAudience, "jwt-audience", "example.com", "signing audience")
	flag.StringVar(&app.CookieDomain, "cookie-domain", "localhost", "cookie domain")
	flag.StringVar(&app.Domain, "domain", "example.com", "domain")
	flag.StringVar(&app.APIKey, "api-key", "9c89eaa00a4a6eefe56f5f53fe3b05a8", "api key")
	flag.Parse()

	fmt.Println("data source name: ", app.DSN)
	fmt.Println("jwt secret: ", app.JWTSecret)
	fmt.Println("jwt issuer: ", app.JWTIssuer)
	fmt.Println("jwt audience: ", app.JWTAudience)
	fmt.Println("cookie domain: ", app.CookieDomain)
	fmt.Println("domain: ", app.Domain)
	fmt.Println("api key: ", app.APIKey)
}
{{< /play >}}

همانطور که مشاهده می کنید، ابتدا یک ساختار به نام application تعریف کردیم که در واقع
همان مشخصات برنامه ما می باشد. سپس یک نمونه از این ساختار را در تابع اصلی برنامه تعریف
کردیم و فیلد های این نمونه از ساختار application را که app نام دارد با استفاده از
flag.StringVar مقدار دهی کردیم و در نهایت آنها را چاپ کردیم.
