---
title: 7.4 تست یکپارچه (Integration Test)
slug: go-integration-testing
weight: 13004
---
تست‌های یکپارچه نوعی از تست نرم‌افزار هستند که به بررسی تعامل صحیح میان اجزای مختلف سیستم می‌پردازند. برخلاف {{< tooltip text="Unit Tests" note="تست‌های واحد" >}} که یک بخش از کد را به‌صورت ایزوله بررسی می‌کنند، این تست‌ها بر اطمینان از عملکرد هماهنگ چند ماژول، لایه یا سرویس در کنار هم تمرکز دارند. هدف اصلی آن‌ها شبیه‌سازی سناریوهای نزدیک به شرایط واقعی و اطمینان از این است که بخش‌های سیستم در کنار یکدیگر همان‌طور که انتظار می‌رود کار می‌کنند.


{{< hint info >}}
**به نقل از ویکی پدیا** **تست یکپارچه‌سازی** (به [انگلیسی](https://fa.wikipedia.org/wiki/%D8%B2%D8%A8%D8%A7%D9%86_%D8%A7%D9%86%DA%AF%D9%84%DB%8C%D8%B3%DB%8C "زبان انگلیسی"): Integration testing) (گاهی اوقات به عنوان یکپارچه سازی و تست به اختصار I & T نامیده می‌شود) یک تست نرم‌افزاری است که در آن ماژول‌های نرم‌افزاری منحصر به فرد به عنوان یک گروه ترکیب و آزمایش می‌شوند. تست یکپارچه سازی برای ارزیابی انطباق یک سیستم یا یک جزء(component) با نیازمندی‌های عملکردی مشخص انجام شده‌است.

تست یکپارچه سازی، پس از تست واحد(Unit testing) و قبل از تست اعتبار سنجی (Validation testing) انجام می‌شود. تست یکپارچه سازی ماژول‌هایی را که روی آنها تست واحد(Unit testing) انجام شده‌است را به عنوان ورودی می‌گیرد و آنها را در گروه‌های بزرگتری دسته‌بندی می‌کند و تست‌های تعریف شده را روی آن گروه‌ها انجام می‌دهد. خروجی آن، سیستم یکپارچه شده‌است که آماده برای تست سیستم (System testing) است.
{{< /hint >}}

در زبان Go، نوشتن تست‌های یکپارچه معمولاً شامل سه مرحله کلیدی است: **راه‌اندازی منابع مورد نیاز (setup)**، **اجرای تست**، و **پاک‌سازی منابع (teardown)**. این منابع می‌توانند شامل پایگاه‌داده، صف پیام، سرویس‌های HTTP یا حتی برنامه‌های خارجی باشند. برای مدیریت این مراحل، از قابلیت‌هایی مانند `TestMain` و `t.Cleanup` استفاده می‌شود تا اطمینان حاصل شود پس از اتمام تست، منابع آزاد شده یا به حالت اولیه بازگردانده می‌شوند. در بسیاری از پروژه‌ها، راه‌اندازی این منابع به کمک Docker یا پکیج هایی مانند `testcontainers-go` و `dockertest` انجام می‌شود.

یکی از مهم‌ترین چالش‌ها در تست‌های یکپارچه، تضمین **ایزوله بودن تست‌ها** است. هر تست باید مستقل اجرا شود تا نتایج آن قابل تکرار باشد. در تست‌های دیتابیس، این موضوع معمولاً با استفاده از rollback تراکنش‌ها یا ایجاد schema مجزا برای هر تست انجام می‌شود. همچنین باید متغیرهای محیطی، فایل‌های پیکربندی و سرویس‌های خارجی ثابت نگه داشته شوند تا تست‌ها در اجراهای مختلف نتایج یکسانی تولید کنند.

با توجه به این که تست‌های یکپارچه نسبت به تست‌های واحد زمان‌برتر هستند، توصیه می‌شود اجرای آن‌ها به‌صورت انتخابی و در شرایط مشخص انجام شود. این کار را می‌توان با استفاده از فلگ‌هایی مانند `-short` یا متغیرهای محیطی مخصوص تست مدیریت کرد. در ادامه این فصل، ساختار استاندارد تست‌های یکپارچه در Go، تکنیک‌های setup و teardown، مدیریت وابستگی‌ها و نکات بهینه‌سازی اجرای آن‌ها را به‌صورت گام‌به‌گام بررسی خواهیم کرد.

