<!doctype html><html lang=fa dir=rtl><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="تست واحد یکی از مهم‌ترین و بنیادی‌ترین ابزارهایی‌ست که یک توسعه‌دهنده حرفه‌ای در اختیار دارد. این نوع تست، تنها بر یک «واحد» مستقل از منطق برنامه تمرکز می‌کند—معمولاً یک تابع، یک متد، یا یک ساختار کوچک از کد که بدون وابستگی به منابع خارجی قابل بررسی است. هدف اصلی از نوشتن تست واحد، اطمینان از صحت رفتار دقیق و قابل پیش‌بینی کد در مواجهه با ورودی‌های مشخص و شرایط کنترل‌شده است."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://book.gofarsi.ir/chapter-7/go-unit-testing/"><meta property="og:site_name" content="زبان گو فارسی"><meta property="og:title" content="7.2 تست واحد (Unit Test)"><meta property="og:description" content="تست واحد یکی از مهم‌ترین و بنیادی‌ترین ابزارهایی‌ست که یک توسعه‌دهنده حرفه‌ای در اختیار دارد. این نوع تست، تنها بر یک «واحد» مستقل از منطق برنامه تمرکز می‌کند—معمولاً یک تابع، یک متد، یا یک ساختار کوچک از کد که بدون وابستگی به منابع خارجی قابل بررسی است. هدف اصلی از نوشتن تست واحد، اطمینان از صحت رفتار دقیق و قابل پیش‌بینی کد در مواجهه با ورودی‌های مشخص و شرایط کنترل‌شده است."><meta property="og:locale" content="fa"><meta property="og:type" content="article"><meta property="article:section" content="chapter-7"><title>7.2 تست واحد (Unit Test) | زبان گو فارسی</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://book.gofarsi.ir/chapter-7/go-unit-testing/><link rel=stylesheet href=/book.min.c2f5390a8db8d6e8a1f34ca78b37beea11b3040c8e6f418e46422051f3aa7136.css integrity="sha256-wvU5Co241uih80ynize+6hGzBAyOb0GORkIgUfOqcTY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/fa.search.min.068daa01b501b56037e7271c5fb4de8760300850b1ce99341e9cad1fe913b814.js integrity="sha256-Bo2qAbUBtWA35yccX7Teh2AwCFCxzpk0HpytH+kTuBQ=" crossorigin=anonymous></script><link rel=stylesheet href=prism.css><meta name=keywords content><link href=https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css rel=stylesheet type=text/css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css crossorigin=anonymous><link rel=alternate type=application/rss+xml href=https://book.gofarsi.ir//feed.xml title="زبان گو فارسی"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-one-dark.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZE44Q8PZDW"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZE44Q8PZDW")</script><script>var html=document.documentElement;localStorage.getItem("themeMode")=="dark"&&html.setAttribute("data-theme","dark"),localStorage.getItem("themeMode")=="light"&&html.setAttribute("data-theme","light")</script></head><body dir=rtl><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo class=book-icon><span>زبان گو فارسی</span></a></h2><div class=magic><div class=book-search><input type=text id=book-search-input placeholder=جستجو aria-label=جستجو maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><div class=js-toggle-wrapper><div class=js-toggle><div class=js-toggle-track><div class=js-toggle-track-check><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=23 height=23></div><div class=js-toggle-track-x><img src=data:image/png;base64,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 role=presentation style=pointer-events:none width=23 height=23></div></div><div class=js-toggle-thumb><img src=data:image/png;base64,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 role=presentation style=pointer-events:none width=46 height=46></div><input class=js-toggle-screenreader-only type=checkbox aria-label="تغییر تم بین روشن و تاریک"></div></div></div><ul><li><a href=/preface/>پیشگفتار</a></li><li><a href=/history/>تاریخچه</a></li><li><a href=/why-go/>چرا زبان Go؟</a></li><li><a href=/installation/>آموزش نصب</a></li><li><a href=/toolchain/>ابزارها, دستورات گو و معرفی IDE</a></li><li><a href=/roadmap/>نقشه یادگیری زبان گو</a></li><li><a href=/interview/>نمونه سوالات مصاحبه</a></li><li><input type=checkbox id=section-c0c35ea61c635f6152f0c00d6a15569e class=toggle>
<label for=section-c0c35ea61c635f6152f0c00d6a15569e class=flex><a href=/chapter-1/ class=flex-auto>فصل اول: آشنایی با مفاهیم گو</a></label><ul><li><a href=/chapter-1/structure-of-go-code/>1.1 ساختار کد گو</a></li><li><a href=/chapter-1/go-built-in-keywords-identifiers/>1.2 کلید واژه و شناسه‌ها</a></li><li><a href=/chapter-1/go-basic-types/>1.3 تایپ‌های پایه</a></li><li><a href=/chapter-1/go-operators/>1.4 عملگرها</a></li><li><a href=/chapter-1/go-variables-and-consts/>1.5 متغیرها و constant</a></li><li><a href=/chapter-1/go-zero-values/>1.6 مقادیر صفر تایپ‌ها (zero values)</a></li><li><a href=/chapter-1/go-function/>1.7 تابع (function)</a></li><li><a href=/chapter-1/go-array/>1.8 آرایه و slice</a></li><li><a href=/chapter-1/go-for/>1.9 حلقه‌ها (for)</a></li><li><a href=/chapter-1/go-map/>1.10 نقشه map</a></li><li><a href=/chapter-1/go-if-switch/>1.11 شرط (if, switch)</a></li><li><a href=/chapter-1/go-package/>1.12 اضافه کردن پکیج در کد (package)</a></li><li><a href=/chapter-1/go-defer-panic-recovery/>1.13 defer, panic, recovery</a></li><li><a href=/chapter-1/go-builtins/>1.14 لیست تایپ‌ها و توابع Builtin</a></li><li><a href=/chapter-1/go-string-formatting/>1.15 قالب بندی رشته‌ها</a></li></ul></li><li><input type=checkbox id=section-ce9b5b1ec927bacdb2712b9c215a3ca1 class=toggle>
<label for=section-ce9b5b1ec927bacdb2712b9c215a3ca1 class=flex><a href=/chapter-2/ class=flex-auto>فصل دوم: مکانیزم‌های زبان</a></label><ul><li><a href=/chapter-2/pointer/>2.1 اشاره‌گر (Pointer)</a></li><li><a href=/chapter-2/struct/>2.2 ساختار (struct)</a></li><li><a href=/chapter-2/method/>2.3 متد (Method)</a></li><li><a href=/chapter-2/interface/>2.4 اینترفیس (Interface)</a></li><li><a href=/chapter-2/type-embedding/>2.5 جاسازی تایپ (type embedding)</a></li><li><a href=/chapter-2/error-handling/>2.6 مدیریت خطاها</a></li><li><a href=/chapter-2/casting-vs-conversion/>2.7 فرق casting با conversion</a></li></ul></li><li><input type=checkbox id=section-0691270142e95f82c4d2eb637f234afd class=toggle>
<label for=section-0691270142e95f82c4d2eb637f234afd class=flex><a href=/chapter-3/ class=flex-auto>فصل سوم: همزمانی (concurrency)</a></label><ul><li><a href=/chapter-3/go-concurrency/>3.1 آشنایی با همزمانی</a></li><li><a href=/chapter-3/goroutine/>3.2 گوروتین (goroutine)</a></li><li><a href=/chapter-3/go-sync-package/>3.3 پکیج sync</a></li><li><a href=/chapter-3/go-atomic/>3.4 پکیج atomic</a></li><li><a href=/chapter-3/goroutine-data-race/>3.5 آموزش مقابله با data race</a></li><li><a href=/chapter-3/go-channel/>3.6 کانال (channel)</a></li><li><a href=/chapter-3/go-select/>3.7 آموزش استفاده از select</a></li><li><a href=/chapter-3/go-context/>3.8 پکیج context</a></li><li><a href=/chapter-3/go-concurrency-teqniques/>3.9 تکنیک های همزمانی</a></li><li><a href=/chapter-3/go-concurrency-patterns/>3.10 الگو های همزمانی</a></li></ul></li><li><input type=checkbox id=section-59efe912b32b5b1290d5ec2dac84f441 class=toggle>
<label for=section-59efe912b32b5b1290d5ec2dac84f441 class=flex><a href=/chapter-4/ class=flex-auto>فصل چهارم: مباحث پیشرفته</a></label><ul><li><a href=/chapter-4/build-go-file/>4.1 آموزش Build پروژه</a></li><li><a href=/chapter-4/debugging-go-code/>4.2 آموزش کار با Debugging</a></li><li><a href=/chapter-4/go-mod/>4.3 آموزش کار با go mod</a></li><li><a href=/chapter-4/workspace/>4.4 آموزش کار با workspace</a></li><li><a href=/chapter-4/vendor/>4.5 آموزش کار با Vendor</a></li><li><a href=/chapter-4/command-line-go/>4.6 آموزش نوشتن برنامه command line</a></li><li><a href=/chapter-4/work-with-file-in-go/>4.7 آموزش کار با فایل</a></li><li><a href=/chapter-4/work-with-json-file-in-go/>4.8 آموزش کار با json</a></li><li><a href=/chapter-4/work-with-toml-file-in-go/>4.9 آموزش کار با toml</a></li><li><a href=/chapter-4/work-with-yaml-file-in-go/>4.10 آموزش کار با yaml</a></li><li><a href=/chapter-4/work-with-csv-file-in-go/>4.11 آموزش کار با csv</a></li><li><a href=/chapter-4/work-with-ini-file-in-go/>4.12 آموزش کار با ini</a></li><li><a href=/chapter-4/work-with-environment-variable/>4.13 آموزش کار با environment variable</a></li><li><a href=/chapter-4/go-regular-expressions/>4.14 آموزش کار با regexp</a></li><li><a href=/chapter-4/go-reflection/>4.15 آموزش reflection</a></li><li><a href=/chapter-4/go-generator/>4.16 آموزش generator</a></li><li><a href=/chapter-4/go-stringer/>4.17 آموزش stringer</a></li><li><a href=/chapter-4/effective-go/>4.18 تکنیک های کدنویسی زبان گو</a></li><li><a href=/chapter-4/go-commentry/>4.19 اصول کامنت نویسی</a></li><li><a href=/chapter-4/go-code-rules/>4.20 قوانین کدنویسی در گو</a></li><li><a href=/chapter-4/go-garbage-collector/>4.21 زباله جمع کن (garbage collector)</a></li><li><a href=/chapter-4/go-plugin/>4.22 کتابخانه Plugin</a></li><li><input type=checkbox id=section-687c92e06ed3c05242e60a3a1a266aa4 class=toggle>
<label for=section-687c92e06ed3c05242e60a3a1a266aa4 class=flex><a href=/chapter-4/oop/ class=flex-auto>4.23 شی گرایی در زبان گو</a></label><ul><li><a href=/chapter-4/oop/go-encapsulation/>4.23.1 کپسوله سازی (Encapsulation)</a></li><li><a href=/chapter-4/oop/go-inheritance/>4.22.2 ارث بری</a></li><li><a href=/chapter-4/oop/go-polymorphism/>4.23.3 پلی مورفیسم (Polymorphism)</a></li><li><a href=/chapter-4/oop/go-overriding/>4.23.4 overriding</a></li><li><a href=/chapter-4/oop/go-abstraction/>4.23.5 abstraction</a></li></ul></li><li><a href=/chapter-4/tracing/>4.24 آموزش tracing</a></li><li><a href=/chapter-4/profiling/>4.25 آموزش profiling</a></li><li><a href=/chapter-4/go-project-layout/>4.26 ساختار پروژه</a></li><li><a href=/chapter-4/go-io-package/>4.27 آموزش کار با پکیج io</a></li></ul></li><li><input type=checkbox id=section-134502b5358f6cf5c83ad497f832087a class=toggle>
<label for=section-134502b5358f6cf5c83ad497f832087a class=flex><a href=/chapter-5/ class=flex-auto>فصل پنجم: برنامه نویسی شبکه با گو</a></label><ul><li><a href=/chapter-5/network-basic/>5.1 شبکه چیست</a></li><li><a href=/chapter-5/go-tcp-server-begginer/>5.2 سرور tcp مقدماتی</a></li><li><a href=/chapter-5/go-tcp-server-advanced/>5.3 سرور tcp پیشرفته</a></li><li><a href=/chapter-5/go-udp-server-begginer/>5.4 سرور udp مقدماتی</a></li><li><a href=/chapter-5/go-udp-server-advanced/>5.5 سرور udp پیشرفته</a></li><li><a href=/chapter-5/go-http-server-begginer/>5.6 کتابخانه http سمت سرور مقدماتی</a></li><li><a href=/chapter-5/go-http-server-advanced/>5.7 کتابخانه http سمت سرور پیشرفته</a></li><li><a href=/chapter-5/go-http-client-begginer/>5.8 کتابخانه http سمت کلاینت مقدماتی</a></li><li><a href=/chapter-5/go-http-client-advanced/>5.9 کتابخانه http سمت کلاینت پیشرفته</a></li><li><a href=/chapter-5/go-quic-prtoocol/>5.10 پروتکل quic</a></li></ul></li><li><input type=checkbox id=section-6f78676abc6f42fefd423ea7de4e1c4d class=toggle>
<label for=section-6f78676abc6f42fefd423ea7de4e1c4d class=flex><a href=/chapter-6/ class=flex-auto>فصل ششم: ژنریک ها (Generics)</a></label><ul><li><a href=/chapter-6/go-generics-basic/>6.1 مقدمه و اهمیت ژنریک‌ها</a></li><li><a href=/chapter-6/go-generics-fundamentals/>6.2 مبانی ژنریک‌ها در Go</a></li><li><a href=/chapter-6/go-generics-syntax-and-structure/>6.3 سینتکس و ساختار ژنریک‌ها در Go</a></li><li><a href=/chapter-6/go-generics-type-sets-and-constraints/>6.4 Constraints و Type Sets</a></li><li><a href=/chapter-6/go-generics-examples-and-practical/>6.5 مثال‌ها و کاربردهای عملی ژنریک‌ها</a></li><li><a href=/chapter-6/comparing-generics/>6.6 مقایسه ژنریک‌ها با راهکارهای قبل از Go 1.18</a></li><li><a href=/chapter-6/limitations-errors-and-anti-patterns-in-generics/>6.7 محدودیت‌ها، خطاها و ضدالگوها در ژنریک‌ها</a></li><li><a href=/chapter-6/generics-best-practice/>6.8 بهترین شیوه‌های استفاده از ژنریک‌ها (Best Practices)</a></li><li><a href=/chapter-6/generics-advanced-examples-and-tips/>6.9 مثال‌های پیشرفته و نکات ویژه</a></li></ul></li><li><input type=checkbox id=section-8f5df719cb6867058bc4273b800e1879 class=toggle checked>
<label for=section-8f5df719cb6867058bc4273b800e1879 class=flex><a href=/chapter-7/ class=flex-auto>فصل هفتم: تست نویسی</a></label><ul><li><a href=/chapter-7/go-introduction-testing/>7.1 مقدمه‌ای بر تست در Go</a></li><li><a href=/chapter-7/go-unit-testing/ class=active>7.2 تست واحد (Unit Test)</a></li><li><a href=/chapter-7/go-table-driven-tests/>7.3 تست جدول‌محور (Table-Driven Test)</a></li></ul></li><li><input type=checkbox id=section-46582e13a18a41adc7936c360b185ec8 class=toggle>
<label for=section-46582e13a18a41adc7936c360b185ec8 class=flex><a href=/chapter-8/ class=flex-auto>فصل هشتم: پکیج های استاندارد</a></label><ul></ul></li><li><input type=checkbox id=section-7b4fd75e0c8dddcfaf05d2809955458b class=toggle>
<label for=section-7b4fd75e0c8dddcfaf05d2809955458b class=flex><a href=/chapter-9/ class=flex-auto>فصل نهم: الگوهای طراحی</a></label><ul><li><input type=checkbox id=section-91fecfeb90059a6577f742161c3cc416 class=toggle>
<label for=section-91fecfeb90059a6577f742161c3cc416 class=flex><a href=/chapter-9/creational-patterns/ class=flex-auto>9.1 الگوهای طراحی سازنده</a></label><ul><li><a href=/chapter-9/creational-patterns/go-singleton-pattern/>9.1.1 الگو Singleton</a></li><li><a href=/chapter-9/creational-patterns/go-factory-method-pattern/>9.1.2 الگو Factory Method</a></li><li><a href=/chapter-9/creational-patterns/go-prototype-pattern/>9.1.3 الگو Prototype</a></li><li><a href=/chapter-9/creational-patterns/go-abstract-factory-pattern/>9.1.4 الگو Abstract Factory</a></li><li><a href=/chapter-9/creational-patterns/go-builder-pattern/>9.1.6 الگو Builder</a></li><li><a href=/chapter-9/creational-patterns/go-object-pool-pattern/>9.1.7 الگو Object Pool</a></li></ul></li><li><input type=checkbox id=section-0bf1b67244bd7a1b2067d73a9ac05c84 class=toggle>
<label for=section-0bf1b67244bd7a1b2067d73a9ac05c84 class=flex><a href=/chapter-9/structural-patterns/ class=flex-auto>9.2 الگوهای طراحی ساختاری</a></label><ul><li><a href=/chapter-9/structural-patterns/go-adaptor-pattern/>9.2.1 الگو Adaptor</a></li><li><a href=/chapter-9/structural-patterns/go-bridge-pattern/>9.2.2 الگو Bridge</a></li><li><a href=/chapter-9/structural-patterns/go-composite-pattern/>9.2.3 الگو Composite</a></li><li><a href=/chapter-9/structural-patterns/go-decorator-pattern/>9.2.1 الگو Decorator</a></li><li><a href=/chapter-9/structural-patterns/go-facade-pattern/>9.2.5 الگو Facade</a></li><li><a href=/chapter-9/structural-patterns/go-flyweight-pattern/>9.2.6 الگو Flyweight</a></li><li><a href=/chapter-9/structural-patterns/go-proxy-pattern/>9.2.7 الگو Proxy</a></li></ul></li><li><input type=checkbox id=section-67e202f99a50c1e49347339369c874b1 class=toggle>
<label for=section-67e202f99a50c1e49347339369c874b1 class=flex><a href=/chapter-9/behavioral-patterns/ class=flex-auto>9.3 الگوهای طراحی رفتاری</a></label><ul><li><a href=/chapter-9/behavioral-patterns/go-chain-of-responsibility-pattern/>9.3.1 الگو Chain Of Responsibility</a></li><li><a href=/chapter-9/behavioral-patterns/go-command-pattern/>9.3.2 الگو Command</a></li><li><a href=/chapter-9/behavioral-patterns/go-iterator-pattern/>9.3.3 الگو Iterator</a></li><li><a href=/chapter-9/behavioral-patterns/go-mediator-pattern/>9.3.4 الگو Mediator</a></li><li><a href=/chapter-9/behavioral-patterns/go-memento-pattern/>9.3.5 الگو Memento</a></li><li><a href=/chapter-9/behavioral-patterns/go-observer-pattern/>9.3.6 الگو Observer</a></li><li><a href=/chapter-9/behavioral-patterns/go-state-pattern/>9.3.7 الگو State</a></li><li><a href=/chapter-9/behavioral-patterns/go-strategy-pattern/>9.3.8 الگو Strategy</a></li><li><a href=/chapter-9/behavioral-patterns/go-template-method-pattern/>9.3.9 الگو Template Method</a></li><li><a href=/chapter-9/behavioral-patterns/go-visitor-pattern/>9.3.10 الگو Visitor</a></li></ul></li><li><input type=checkbox id=section-a8aa81f62696e9f9c69a81a3318a50eb class=toggle>
<label for=section-a8aa81f62696e9f9c69a81a3318a50eb class=flex><a href=/chapter-9/concurrency-patterns/ class=flex-auto>9.4 الگوهای همزمانی</a></label><ul><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-wait-for-result/>9.4.1 الگو Wait For Result</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-fan-out-in/>9.4.2 الگو Fan Out/In</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-wait-for-task/>9.4.3 الگو Wait For Task</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-worker-pool/>9.4.4 الگوی Worker Pool</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-drop/>9.4.5 الگو Drop</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-cancellation/>9.4.6 الگو Context Cancellation Pattern</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-semaphore/>9.4.7 الگو Semaphore</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-retry-timeout/>9.4.8 الگو Retry Timeout</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-producer-consumer/>9.4.9 الگو Producer-Consumer</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-monitor/>9.4.10 الگو Monitor</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-future/>9.4.11 الگو Future</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-pipeline/>9.4.12 الگو Pipeline</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-subscription/>9.4.13 الگو Subscription</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-brdige-channel/>9.4.14 الگو Bridge Channel</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-queuing/>9.4.15 الگو Queuing</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-ratelimit/>9.4.16 الگو Rate limit</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-deadlock-recovery/>9.4.17 الگو Deadlock Recovery</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-channel-cancellation/>9.4.18 الگو Channel Cancellation</a></li><li><a href=/chapter-9/concurrency-patterns/go-concurrency-pattern-lock-free-synchronization/>9.4.19 الگو Lock-free synchronization</a></li></ul></li><li><input type=checkbox id=section-d4428d0313ccb2e3380b00740324e064 class=toggle>
<label for=section-d4428d0313ccb2e3380b00740324e064 class=flex><a href=/chapter-9/cloud-native-patterns/ class=flex-auto>9.5 الگوهای Cloud Native</a></label><ul><li><a href=/chapter-9/cloud-native-patterns/go-cloud-native-circuit-breaker-pattern/>9.5.1 الگو Circuit Breaker</a></li><li><a href=/chapter-9/cloud-native-patterns/go-cloud-native-debounce-pattern/>9.5.2 الگو Debounce</a></li><li><a href=/chapter-9/cloud-native-patterns/go-cloud-native-retry-pattern/>9.5.3 الگو Retry</a></li><li><a href=/chapter-9/cloud-native-patterns/go-cloud-native-throttle-pattern/>9.5.4 الگو Throttle</a></li><li><a href=/chapter-9/cloud-native-patterns/go-cloud-native-timeout-pattern/>9.5.5 الگو Timeout</a></li></ul></li><li><input type=checkbox id=section-d2db70ad636838c12fc76435099656ac class=toggle>
<label for=section-d2db70ad636838c12fc76435099656ac class=flex><a href=/chapter-9/anti-pattern/ class=flex-auto>9.6 ضد الگوها (Anti-Patterns)</a></label><ul><li><a href=/chapter-9/anti-pattern/go-anti-patterns-in-syntax/>9.6.1 ضد الگو سینتکسی</a></li></ul></li><li><a href=/chapter-9/solid-principle-in-golang/>9.7 اصول SOLID</a></li></ul></li><li><input type=checkbox id=section-109a423730eebb4b9e804ab6e8dc6af0 class=toggle>
<label for=section-109a423730eebb4b9e804ab6e8dc6af0 class=flex><a href=/chapter-10/ class=flex-auto>فصل دهم: الگوریتم و ساختار داده</a></label><ul><li><a href=/chapter-10/10.1--data-structures-queue-stack-lists/>10.1 Data Structures (Queue Stack Lists)</a></li></ul></li><li><input type=checkbox id=section-0736842d303fef477d0a09e8de4a0d85 class=toggle>
<label for=section-0736842d303fef477d0a09e8de4a0d85 class=flex><a href=/chapter-11/ class=flex-auto>فصل یازدهم: معماری های نرم افزار</a></label><ul></ul></li><li><input type=checkbox id=section-efb5b19050ead65a76618516db266d2d class=toggle>
<label for=section-efb5b19050ead65a76618516db266d2d class=flex><a href=/chapter-12/ class=flex-auto>فصل دوازدهم: شبکه بلاکچین</a></label><ul><li><input type=checkbox id=section-ee81a41ef810f317eba2e67d447c0ec4 class=toggle>
<label for=section-ee81a41ef810f317eba2e67d447c0ec4 class=flex><a href=/chapter-12/blockchain/ class=flex-auto>12.1 بلاکچین</a></label><ul><li><a href=/chapter-12/blockchain/blockchain/>12.1.1 بلاکچین چیست</a></li><li><a href=/chapter-12/blockchain/blockchain-history/>12.1.2 تاریخچه بلاکچین</a></li><li><a href=/chapter-12/blockchain/blockchain-architecture/>12.1.3 معماری بلاکچین</a></li><li><a href=/chapter-12/blockchain/blockchain-type/>12.1.4 انواع بلاکچین</a></li><li><a href=/chapter-12/blockchain/blockchain-different-with-centerlized/>12.1.5 تفاوت سیستم متمرکز با غیرمتمرکز</a></li><li><a href=/chapter-12/blockchain/blockchain-scale/>12.1.6 مقیاس پذیری در بلاکچین</a></li><li><a href=/chapter-12/blockchain/blockchain-security/>12.1.7 امنیت در بلاکچین</a></li><li><a href=/chapter-12/blockchain/blockchain-cryptography/>12.1.8 مفاهیم رمزنگاری</a></li><li><a href=/chapter-12/blockchain/blockchain-consensus-algorithm/>12.1.10 الگوریتم اجماع (Consensus)</a></li><li><a href=/chapter-12/blockchain/blockchain-p2p-network/>12.1.11 ساختار و کاربرد شبکه P2P</a></li><li><a href=/chapter-12/blockchain/blockchain-data-management/>12.1.12 مدیریت داده در بلاکچین</a></li><li><a href=/chapter-12/blockchain/blockchain-network-testing/>12.1.13 تست پذیری شبکه</a></li><li><a href=/chapter-12/blockchain/blockchain-analyze-and-optimization/>12.1.14 ارزیابی و بهینه سازی شبکه</a></li><li><a href=/chapter-12/blockchain/blockchain-monitoring/>12.1.15 مانیتورینگ شبکه</a></li><li><a href=/chapter-12/blockchain/blockchain-forking/>12.1.16 استراتژی فورک ها</a></li><li><a href=/chapter-12/blockchain/blockchain-api-and-sdk/>12.1.17 پیاده سازی انواع API ها و SDK ها</a></li><li><a href=/chapter-12/blockchain/blockchain-keys-and-addresses/>12.1.18 کلیدها و آدرس ها</a></li><li><a href=/chapter-12/blockchain/blockchain-accounts/>12.1.19 اکانت ها</a></li><li><a href=/chapter-12/blockchain/blockchain-transactions-and-messages/>12.1.20 تراکنش ها و پیام ها</a></li><li><a href=/chapter-12/blockchain/blockchain-blocks/>12.1.21 بلوک ها (Blocks)</a></li><li><a href=/chapter-12/blockchain/blockchain-genesis/>12.1.22 جنسیس (Genesis)</a></li><li><a href=/chapter-12/blockchain/blockchain-smart-contracts/>12.1.23 قراردادهای هوشمند</a></li><li><a href=/chapter-12/blockchain/blockchain-privacy/>12.1.24 حریم خصوصی شبکه</a></li></ul></li><li><input type=checkbox id=section-3a22b13c7bb1ba964a59c01435868bd6 class=toggle>
<label for=section-3a22b13c7bb1ba964a59c01435868bd6 class=flex><a href=/chapter-12/bitcoin/ class=flex-auto>12.2 شبکه بیت کوین</a></label><ul><li><a href=/chapter-12/bitcoin/bitcoin/>12.2.1 معرفی بیت کوین</a></li><li><a href=/chapter-12/bitcoin/bitcoin-cryptography/>12.2.2 رمزنگاری در بیت کوین</a></li><li><a href=/chapter-12/bitcoin/bitcoin-addresses/>12.2.3 آدرس ها</a></li><li><a href=/chapter-12/bitcoin/bitcoin-transactions/>12.2.4 تراکنش ها</a></li><li><a href=/chapter-12/bitcoin/bitcoin-structure/>12.2.5 ساختار بلاکچین بیت کوین</a></li><li><a href=/chapter-12/bitcoin/bitcoin-consensus/>12.2.6 الگوریتم اجماع</a></li><li><a href=/chapter-12/bitcoin/bitcoin-miners/>12.2.7 ماینرها</a></li><li><a href=/chapter-12/bitcoin/bitcoin-network/>12.2.8 شبکه</a></li><li><a href=/chapter-12/bitcoin/bitcoin-wallets/>12.2.9 والت ها</a></li><li><a href=/chapter-12/bitcoin/bitcoin-in-real-world/>12.2.10 بیت کوین در دنیای واقعی</a></li><li><a href=/chapter-12/bitcoin/bitcoin-innovation/>12.2.11 نوآوری</a></li><li><a href=/chapter-12/bitcoin/bitcoin-clients/>12.2.12 کلاینت ها</a></li><li><a href=/chapter-12/bitcoin/bitcoin-programming/>12.2.13 برنامه نویسی در بیت کوین</a></li></ul></li><li><input type=checkbox id=section-b9f4acac44a727569ffab43028a36441 class=toggle>
<label for=section-b9f4acac44a727569ffab43028a36441 class=flex><a href=/chapter-12/ethereum/ class=flex-auto>12.3 شبکه اتریوم</a></label><ul><li><a href=/chapter-12/ethereum/ethereum/>12.3.1 معرفی اتریوم</a></li><li><a href=/chapter-12/ethereum/ethereum-cryptography/>12.3.2 رمزنگاری</a></li><li><a href=/chapter-12/ethereum/ethereum-keys-and-addresses/>12.3.3 آدرس ها و کلیدها</a></li><li><a href=/chapter-12/ethereum/ethereum-accounts/>12.3.4 اکانت ها</a></li><li><a href=/chapter-12/ethereum/ethereum-transactions-and-messages/>12.3.5 تراکنش ها و پیام ها</a></li><li><a href=/chapter-12/ethereum/ethereum-virtual-machine/>12.3.6 ماشین مجازی اتریوم</a></li><li><a href=/chapter-12/ethereum/ethereum-blocks/>12.3.7 بلاک ها</a></li><li><a href=/chapter-12/ethereum/ethereum-consensus/>12.3.8 الگوریتم اجماع</a></li><li><a href=/chapter-12/ethereum/ethereum-nodes-and-miners/>12.3.9 نودها و ماینرها</a></li><li><a href=/chapter-12/ethereum/ethereum-network/>12.3.10 شبکه</a></li><li><a href=/chapter-12/ethereum/ethereum-smart-contracts/>12.3.11 قراردادهای هوشمند</a></li><li><a href=/chapter-12/ethereum/ethereum-wallets-and-clients/>12.3.12 والت ها و کلاینت ها</a></li><li><a href=/chapter-12/ethereum/go-ethereum/>12.3.13 معرفی go-ethereum</a></li><li><a href=/chapter-12/ethereum/work-with-accounts/>12.3.14 کار با اکانت ها</a></li><li><a href=/chapter-12/ethereum/transactions-on-ethereum/>12.3.15 تراکنش برروی اتریوم</a></li><li><a href=/chapter-12/ethereum/read-write-in-smart-contracts/>12.3.16 نوشتن و ارتباط با قراردادهای هوشمند</a></li><li><a href=/chapter-12/ethereum/abi-and-bin-file/>12.3.17 آشنایی با فایل ABI و bytecode</a></li><li><a href=/chapter-12/ethereum/event-logs/>12.3.18 خواندن و دریافت لحظه ای لاگ های کانترکت ها</a></li><li><a href=/chapter-12/ethereum/signature/>12.3.19 ایجاد و تایید امضا</a></li><li><a href=/chapter-12/ethereum/geth/>12.3.20 کار با geth</a></li><li><a href=/chapter-12/ethereum/protocol-swarm-and-whisper/>12.3.21 کار با پروتکل whisper و swarm</a></li></ul></li><li><input type=checkbox id=section-71c1e946dcbe629ce566392c9ba8a5bd class=toggle>
<label for=section-71c1e946dcbe629ce566392c9ba8a5bd class=flex><a href=/chapter-12/pactus/ class=flex-auto>12.4 شبکه پکتوس</a></label><ul><li><a href=/chapter-12/pactus/pactus/>12.4.1 معرفی پکتوس</a></li><li><a href=/chapter-12/pactus/pactus-roadmap/>12.4.2 نقشه راه و اهداف</a></li><li><a href=/chapter-12/pactus/pactus-cryptography/>12.4.3 رمزنگاری</a></li><li><a href=/chapter-12/pactus/pactus-addresses-and-keys/>12.4.4 آدرس ها و کلیدها</a></li><li><a href=/chapter-12/pactus/pactus-accounts/>12.4.5 اکانت ها</a></li><li><a href=/chapter-12/pactus/pactus-transactions-and-messages/>12.4.6 تراکنش ها و پیغام ها</a></li><li><a href=/chapter-12/pactus/pactus-consensus/>12.4.7 الگوریتم اجماع</a></li><li><a href=/chapter-12/pactus/pactus-client/>12.4.8 کار با کلاینت</a></li><li><a href=/chapter-12/pactus/pactus-smart-contracts/>12.4.9 قراردادهای هوشمند (بزودی)</a></li></ul></li></ul></li></ul><a class="book-btn gray" href=https://github.com/GoFarsi/book>مخزن کتاب</a>
<a class=book-btn href=https://github.com/GoFarsi/book/blob/main/COUNTRIBUTING.md>مشارکت در کتاب زبان گو</a><center><p><img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/GoFarsi/book> <img alt=GitHub src=https://img.shields.io/github/license/gofarsi/book> <img alt="GitHub contributors" src=https://img.shields.io/github/contributors/gofarsi/book></p></center></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>7.2 تست واحد (Unit Test)</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"></br><main><div class=wrapper><a href=https://t.me/GolangEngineers class="icon telegram" target=_blank><div class=tooltip>گروه تلگرامی مهندسین گولنگ</div><span><i class="fab fa-telegram"></i></span>
</a><a href=https://linkedin.com/in/Ja7ad class="icon linkedin" target=_blank><div class=tooltip>لینکدین نویسنده</div><span><i class="fab fa-linkedin"></i></span>
</a><a href=https://twitter.com/Ja7adR class="icon twitter" target=_blank><div class=tooltip>توییتر نویسنده</div><span><i class="fab fa-twitter"></i></span></a></div></main></br></br><nav id=TableOfContents><ul><li><ul><li><a href=#721-اصول-نوشتن-تستهای-واحد-در-go-و-ساختار-آنها>7.2.1 اصول نوشتن تست‌های واحد در Go و ساختار آن‌ها</a><ul><li><a href=#7211-ساختار-پایه-تست-واحد>7.2.1.1 ساختار پایه تست واحد</a></li><li><a href=#7212-نقش-تابع-tfail-terror-و-tfatal>7.2.1.2 نقش تابع <code>t.Fail</code>, <code>t.Error</code>, و <code>t.Fatal</code></a></li><li><a href=#7213-الزامات-ابزار-go-test>7.2.1.3 الزامات ابزار go test</a></li><li><a href=#7214-نحوه-سازماندهی-فایلها-و-پوشهها>7.2.1.4 نحوه سازمان‌دهی فایل‌ها و پوشه‌ها</a></li><li><a href=#7215-اجرای-تست>7.2.1.5 اجرای تست</a></li><li><a href=#7216-چرا-این-ساختار-موفق-است>7.2.1.6 چرا این ساختار موفق است؟</a></li></ul></li><li><a href=#722-روشهای-مدیریت-خطا-در-تستها>7.2.2 روش‌های مدیریت خطا در تست‌ها</a><ul><li><a href=#7221-بررسی-خطاهای-مورد-انتظار>7.2.2.1 بررسی خطاهای مورد انتظار</a></li><li><a href=#7222-تست-موفقیت-در-غیاب-خطا>7.2.2.2 تست موفقیت در غیاب خطا</a></li><li><a href=#7223-استفاده-از-errorsis-و-errorsas>7.2.2.3 استفاده از errors.Is و errors.As</a></li><li><a href=#7224-پوشش-تمامی-مسیرهای-منطقی>7.2.2.4 پوشش تمامی مسیرهای منطقی</a></li></ul></li><li><a href=#723-تست-توابع-غیرصادرشده-unexported-و-کاربرد-پکیج-_test>7.2.3 تست توابع غیرصادرشده (Unexported) و کاربرد پکیج _test</a><ul><li><a href=#7231-نوشتن-تست-در-همان-پکیج>7.2.3.1 نوشتن تست در همان پکیج</a></li><li><a href=#7232-استفاده-از-پکیج-تست-جداگانه-_test>7.2.3.2 استفاده از پکیج تست جداگانه (_test)</a></li><li><a href=#7233-تست-غیرمستقیم-توابع-داخلی>7.2.3.3 تست غیرمستقیم توابع داخلی</a></li><li><a href=#7234-مزایا-و-معایب-هر-رویکرد>7.2.3.4 مزایا و معایب هر رویکرد</a></li><li><a href=#7235-نکات-تجربی>7.2.3.5 نکات تجربی</a></li></ul></li><li><a href=#724-نکات-کاربردی-و-اشتباهات-رایج-در-تستهای-واحد>7.2.4 نکات کاربردی و اشتباهات رایج در تست‌های واحد</a><ul><li><a href=#7241-تفاوت-بین-terror-و-tfatal-را-بشناسید>7.2.4.1 تفاوت بین t.Error و t.Fatal را بشناسید</a></li><li><a href=#7242-از-timesleep-در-یونیت-تست-استفاده-نکنید>7.2.4.2 از time.Sleep در یونیت تست استفاده نکنید</a></li><li><a href=#7243-تستهای-وابسته-به-زمان-را-کنترل-کنید>7.2.4.3 تست‌های وابسته به زمان را کنترل کنید</a></li><li><a href=#7244-از-ttempdir-برای-ساخت-فایل-موقت-استفاده-کنید>7.2.4.4 از <code>t.TempDir()</code> برای ساخت فایل‌ موقت استفاده کنید</a></li><li><a href=#7245-مراقب-caching-ناخواسته-باشید>7.2.4.5 مراقب caching ناخواسته باشید</a></li><li><a href=#7246-تست-نباید-فقط-تابع-را-صدا-بزند>7.2.4.6 تست نباید فقط تابع را صدا بزند</a></li><li><a href=#7247-گزارشدهی-دقیق-بنویسید>7.2.4.7 گزارش‌دهی دقیق بنویسید</a></li><li><a href=#7248-نامگذاری-مناسب-تستها>7.2.4.8 نام‌گذاری مناسب تست‌ها</a></li></ul></li><li><a href=#725-تست-واحد-برای-ساختارها-و-متدهای-hahahugoshortcode178s10hbhb>7.2.5 تست واحد برای ساختارها و متدهای HAHAHUGOSHORTCODE178s10HBHB</a><ul><li><a href=#7251-تست-متدهای-گیرنده-مقداری-value-receiver>7.2.5.1 تست متدهای گیرنده مقداری (value receiver)</a></li><li><a href=#7252-تست-متدهای-گیرنده-اشارهگری-pointer-receiver>7.2.5.2 تست متدهای گیرنده اشاره‌گری (pointer receiver)</a></li><li><a href=#7253-تست-چند-متد-روی-یک-نمونه>7.2.5.3 تست چند متد روی یک نمونه</a></li><li><a href=#7254-جداسازی-لایه-logic-از-state>7.2.5.4 جداسازی لایه logic از state</a></li><li><a href=#7255-رفتار-پیشفرض-در-مقادیر-تهی-zero-value>7.2.5.5 رفتار پیش‌فرض در مقادیر تهی (zero value)</a></li><li><a href=#7256-ترکیب-متد-و-خطا>7.2.5.6 ترکیب متد و خطا</a></li></ul></li><li><a href=#726-تفکیک-تستهای-سریع-و-آهسته-با--short>7.2.6 تفکیک تست‌های سریع و آهسته با -short</a><ul><li><a href=#7261-مثال-کاربردی>7.2.6.1 مثال کاربردی</a></li><li><a href=#7262-مزایا>7.2.6.2 مزایا</a></li><li><a href=#7263-نکته-مهم>7.2.6.3 نکته مهم</a></li><li><a href=#7264-ترکیب-با-ابزارهای-دیگر>7.2.6.4 ترکیب با ابزارهای دیگر</a></li></ul></li></ul></li></ul></nav></aside></header><h1>7.2 تست واحد (Unit Test)</h1><article class="markdown book-article"><p>تست واحد یکی از مهم‌ترین و بنیادی‌ترین ابزارهایی‌ست که یک توسعه‌دهنده حرفه‌ای در اختیار دارد. این نوع تست، تنها بر یک «واحد» مستقل از منطق برنامه تمرکز می‌کند—معمولاً یک تابع، یک متد، یا یک ساختار کوچک از کد که بدون وابستگی به منابع خارجی قابل بررسی است. هدف اصلی از نوشتن تست واحد، اطمینان از صحت رفتار دقیق و قابل پیش‌بینی کد در مواجهه با ورودی‌های مشخص و شرایط کنترل‌شده است.</p><p>در زبان Go، فلسفه طراحی بر سادگی، سرعت و ابزارهای داخلی استوار است؛ این رویکرد به‌وضوح در ساختار تست‌نویسی نیز دیده می‌شود. بدون نیاز به هیچ‌گونه چارچوب یا ابزار جانبی، می‌توان تنها با استفاده از فایل‌های <code>_test.go</code> و توابع <code>TestXxx(t *testing.T)</code> تست‌های کاملی برای هر ماژول نوشت. این تست‌ها به‌صورت یکپارچه با ابزار رسمی <code>go test</code> اجرا می‌شوند و خروجی‌ای دقیق، سریع و قابل‌درک ارائه می‌دهند.</p><p>ویژگی‌هایی مانند اجرای تست‌های جداگانه با <code>-run</code>، دسته‌بندی تست‌ها با <code>t.Run</code>، پوشش کد با <code>-cover</code>، تست‌های موازی با <code>t.Parallel()</code> و پشتیبانی کامل از ساختارهای ساده Go، باعث شده‌اند که تست واحد نه فقط یک ابزار، بلکه یک عادت طبیعی در سبک توسعه Go محسوب شود. در عمل، یونیت تست‌ها نه‌تنها در کشف باگ‌ها مؤثرند، بلکه مرجعی قابل‌اطمینان برای تعریف رفتار و مستندسازی سیستم نیز به‌شمار می‌آیند.</p><p>در ادامه این بخش، ابتدا به ساختار پایه تست واحد در Go می‌پردازیم، سپس الگوهای رایج، ضدالگوها، نکات پیشرفته و مثال‌هایی از دنیای واقعی را بررسی خواهیم کرد.</p><blockquote class="book-hint info"><p><strong>به نقل از ویکی پدیا</strong>
<strong>آزمون واحد</strong> (به <a href=https://fa.wikipedia.org/wiki/%D8%B2%D8%A8%D8%A7%D9%86_%D8%A7%D9%86%DA%AF%D9%84%DB%8C%D8%B3%DB%8C title="زبان انگلیسی">انگلیسی</a>: unit testing) در <a href=https://fa.wikipedia.org/wiki/%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%E2%80%8C%D9%86%D9%88%DB%8C%D8%B3%DB%8C title=برنامه‌نویسی>برنامه‌نویسی رایانه‌ای</a>، نوعی <a href=https://fa.wikipedia.org/wiki/%D8%A2%D8%B2%D9%85%D9%88%D9%86_%D9%86%D8%B1%D9%85%E2%80%8C%D8%A7%D9%81%D8%B2%D8%A7%D8%B1 title="آزمون نرم‌افزار">آزمون نرم‌افزار</a> است که در آن «واحدهای منفرد <a href=https://fa.wikipedia.org/wiki/%DA%A9%D8%AF_%D9%85%D9%86%D8%A8%D8%B9 title="کد منبع">کد منبع</a>» مورد آزمون قرار می‌گیرند تا تعیین شود که آیا برای استفاده سازگار هستند یا نه. در اینجا «واحد منفرد کد منبع» یعنی مجموعه‌ای از یک یا بیشتر <a href=https://fa.wikipedia.org/wiki/%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%E2%80%8C%D9%86%D9%88%DB%8C%D8%B3%DB%8C_%D9%BE%D9%88%D8%AF%D9%85%D8%A7%D9%86%DB%8C title="برنامه‌نویسی پودمانی">پودمان</a> برنامه رایانه‌ای، همراه با داده کنترلی مرتبط، <a href=https://fa.wikipedia.org/wiki/%D8%B1%D9%88%DB%8C%D9%87_%5c%28%D8%B9%D9%84%D9%88%D9%85_%D8%B1%D8%A7%DB%8C%D8%A7%D9%86%D9%87%5c%29 title="رویه (علوم رایانه)">رویه</a> استفاده، و رویه عملیاتی.<a href=https://fa.wikipedia.org/wiki/%D8%A2%D8%B2%D9%85%D9%88%D9%86_%D9%88%D8%A7%D8%AD%D8%AF#cite_note-kolawa-1>[۱]</a></p><p>آزمون‌های واحد معمولاً آزمون‌هایی <a href=https://fa.wikipedia.org/wiki/%D8%A7%D8%A8%D8%B2%D8%A7%D8%B1_%D8%AA%D8%B3%D8%AA_%D9%86%D8%B1%D9%85%E2%80%8C%D8%A7%D9%81%D8%B2%D8%A7%D8%B1 title="ابزار تست نرم‌افزار">خودکار</a> هستند که توسط <a href=https://fa.wikipedia.org/wiki/%D8%AA%D9%88%D8%B3%D8%B9%D9%87%E2%80%8C%D8%AF%D9%87%D9%86%D8%AF%D9%87_%D9%86%D8%B1%D9%85%E2%80%8C%D8%A7%D9%81%D8%B2%D8%A7%D8%B1 title="توسعه‌دهنده نرم‌افزار">توسعه‌دهنده نرم‌افزار</a> نوشته و اجرا می‌شوند، این آزمون برای آن انجام می‌شود تا اطمینان حاصل شود که بخشی از یک برنامه‌کاربردی (که «واحد» نام دارد) <a href=https://fa.wikipedia.org/wiki/%D8%B7%D8%B1%D8%A7%D8%AD%DB%8C_%D9%86%D8%B1%D9%85%E2%80%8C%D8%A7%D9%81%D8%B2%D8%A7%D8%B1 title="طراحی نرم‌افزار">طراحی</a> را برآورده کرده‌است و رفتارش هم براساس انتظار است.<a href=https://fa.wikipedia.org/wiki/%D8%A2%D8%B2%D9%85%D9%88%D9%86_%D9%88%D8%A7%D8%AD%D8%AF#cite_note-hamill-2>[۲]</a></p></blockquote><h2 id=721-اصول-نوشتن-تستهای-واحد-در-go-و-ساختار-آنها>7.2.1 اصول نوشتن تست‌های واحد در Go و ساختار آن‌ها
<a class=anchor href=#721-%d8%a7%d8%b5%d9%88%d9%84-%d9%86%d9%88%d8%b4%d8%aa%d9%86-%d8%aa%d8%b3%d8%aa%d9%87%d8%a7%db%8c-%d9%88%d8%a7%d8%ad%d8%af-%d8%af%d8%b1-go-%d9%88-%d8%b3%d8%a7%d8%ae%d8%aa%d8%a7%d8%b1-%d8%a2%d9%86%d9%87%d8%a7>#</a></h2><p>نوشتن تست‌های واحد در زبان Go ساده، شفاف و کاملاً منطبق با فلسفه‌ی طراحی زبان است: حداقل پیچیدگی، حداکثر خوانایی و وابستگی صفر به چارچوب‌های جانبی. در Go، تست‌های واحد در فایل‌هایی با پسوند <code>_test.go</code> تعریف می‌شوند و باید در همان پکیجی باشند که کد اصلی قرار دارد یا در پکیجی مجزا با پسوند <code>_test</code> برای جدا‌سازی وابستگی‌ها.</p><p>هر تست واحد باید با تابعی به فرم زیر آغاز شود:</p><pre><code class=language-go>func TestXxx(t *testing.T)
</code></pre><p>که در آن <code>Xxx</code> می‌تواند هر نام معناداری باشد که با حرف بزرگ آغاز شده است (برای شناسایی توسط ابزار <code>go test</code>) و پارامتر <code>t</code> از نوع <span class=tooltip data-tooltip=*testing.T ontouchend=toggleTooltip(this)>تی</span>
بوده و برای مدیریت وضعیت تست به‌کار می‌رود.</p><h3 id=7211-ساختار-پایه-تست-واحد>7.2.1.1 ساختار پایه تست واحد
<a class=anchor href=#7211-%d8%b3%d8%a7%d8%ae%d8%aa%d8%a7%d8%b1-%d9%be%d8%a7%db%8c%d9%87-%d8%aa%d8%b3%d8%aa-%d9%88%d8%a7%d8%ad%d8%af>#</a></h3><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

func Add(a, b int) int {
    return a + b
}

func TestAdd(t *testing.T) {
    got := Add(2, 3)
    want := 5
    if got != want {
        t.Errorf("Add(2,3) = %d; want %d", got, want)
    }
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><p>در این مثال ساده:</p><ul><li>تابع <code>Add</code> بررسی می‌شود.</li><li>نتیجه با مقدار مورد انتظار مقایسه شده.</li><li>در صورت مغایرت، پیامی با <code>t.Errorf</code> ثبت می‌شود که باعث شکست تست می‌گردد.</li></ul><h3 id=7212-نقش-تابع-tfail-terror-و-tfatal>7.2.1.2 نقش تابع <code>t.Fail</code>, <code>t.Error</code>, و <code>t.Fatal</code>
<a class=anchor href=#7212-%d9%86%d9%82%d8%b4-%d8%aa%d8%a7%d8%a8%d8%b9-tfail-terror-%d9%88-tfatal>#</a></h3><p>در تست‌های Go چندین روش برای ثبت خطا وجود دارد:</p><table><thead><tr><th>تابع</th><th>توضیح</th></tr></thead><tbody><tr><td><code>t.Error</code></td><td>ثبت خطا و ادامه اجرای تست</td></tr><tr><td><code>t.Errorf</code></td><td>مانند <code>t.Error</code> اما با فرمت‌دهی رشته</td></tr><tr><td><code>t.Fail</code></td><td>فقط ثبت خطا بدون پیام</td></tr><tr><td><code>t.Fatal</code></td><td>ثبت خطا و توقف فوری اجرای تابع تست</td></tr><tr><td><code>t.Fatalf</code></td><td>مانند <code>t.Fatal</code> با امکان فرمت‌دهی</td></tr></tbody></table><p>نمونه:</p><pre><code class=language-go>if err != nil {
    t.Fatalf(&quot;unexpected error: %v&quot;, err)
}
</code></pre><h3 id=7213-الزامات-ابزار-go-test>7.2.1.3 الزامات ابزار go test
<a class=anchor href=#7213-%d8%a7%d9%84%d8%b2%d8%a7%d9%85%d8%a7%d8%aa-%d8%a7%d8%a8%d8%b2%d8%a7%d8%b1-go-test>#</a></h3><p>برای اینکه <code>go test</code> تست‌ها را شناسایی و اجرا کند:</p><ul><li>تابع تست باید با <code>Test</code> شروع شود.</li><li>آرگومان آن باید دقیقاً <code>t *testing.T</code> باشد.</li><li>نباید مقدار برگشتی داشته باشد.</li><li>فایل باید پسوند <code>_test.go</code> داشته باشد.</li></ul><h3 id=7214-نحوه-سازماندهی-فایلها-و-پوشهها>7.2.1.4 نحوه سازمان‌دهی فایل‌ها و پوشه‌ها
<a class=anchor href=#7214-%d9%86%d8%ad%d9%88%d9%87-%d8%b3%d8%a7%d8%b2%d9%85%d8%a7%d9%86%d8%af%d9%87%db%8c-%d9%81%d8%a7%db%8c%d9%84%d9%87%d8%a7-%d9%88-%d9%be%d9%88%d8%b4%d9%87%d9%87%d8%a7>#</a></h3><p>در Go، تست‌ها معمولاً در کنار کد اصلی قرار می‌گیرند:</p><pre><code>calculator/
├── add.go
└── add_test.go
</code></pre><p>اما برای تست رفتار خارجی بدون دسترسی به توابع یا متغیرهای داخلی، می‌توان از پکیج <code>mypkg_test</code> استفاده کرد که نسخه‌ای مجزا از پکیج اصلی بدون دسترسی داخلی است:</p><pre><code class=language-go>package mypkg_test
</code></pre><p>این روش برای نوشتن تست‌های سطح بالاتر یا رفتار مصرف‌کننده بسیار مناسب است.</p><h3 id=7215-اجرای-تست>7.2.1.5 اجرای تست
<a class=anchor href=#7215-%d8%a7%d8%ac%d8%b1%d8%a7%db%8c-%d8%aa%d8%b3%d8%aa>#</a></h3><p>اجرای ساده:</p><pre><code class=language-bash>go test
</code></pre><p>اجرای یک تابع خاص:</p><pre><code class=language-bash>go test -run=TestAdd
</code></pre><p>اجرا با جزئیات بیشتر (verbose):</p><pre><code class=language-bash>go test -v
</code></pre><h3 id=7216-چرا-این-ساختار-موفق-است>7.2.1.6 چرا این ساختار موفق است؟
<a class=anchor href=#7216-%da%86%d8%b1%d8%a7-%d8%a7%db%8c%d9%86-%d8%b3%d8%a7%d8%ae%d8%aa%d8%a7%d8%b1-%d9%85%d9%88%d9%81%d9%82-%d8%a7%d8%b3%d8%aa>#</a></h3><p>دلایل موفقیت رویکرد Go در تست‌های واحد:</p><ul><li><strong>خوانایی بالا</strong>: هر تست به‌راحتی قابل درک و تحلیل است.</li><li><strong>حداقل boilerplate</strong>: بدون نیاز به setup یا framework.</li><li><strong>اجرای سریع</strong>: تست‌ها بلافاصله اجرا می‌شوند.</li><li><strong>پشتیبانی بومی ابزارها</strong>: بدون وابستگی خارجی.</li></ul><h2 id=722-روشهای-مدیریت-خطا-در-تستها>7.2.2 روش‌های مدیریت خطا در تست‌ها
<a class=anchor href=#722-%d8%b1%d9%88%d8%b4%d9%87%d8%a7%db%8c-%d9%85%d8%af%db%8c%d8%b1%db%8c%d8%aa-%d8%ae%d8%b7%d8%a7-%d8%af%d8%b1-%d8%aa%d8%b3%d8%aa%d9%87%d8%a7>#</a></h2><p>در تست‌های واحد، بررسی رفتار توابع در مواجهه با خطا یکی از حیاتی‌ترین جنبه‌هاست. بسیاری از توابع در Go به‌جای پرتاب استثنا، مقادیر <code>error</code> بازمی‌گردانند، بنابراین انتظار بروز خطا یا نبود خطا بخشی مهم از منطق تست است. تستی که فقط مقدار بازگشتی موفق را بررسی کند، ناقص است. یک تست کامل باید حالت‌های failure را نیز پوشش دهد.</p><h3 id=7221-بررسی-خطاهای-مورد-انتظار>7.2.2.1 بررسی خطاهای مورد انتظار
<a class=anchor href=#7221-%d8%a8%d8%b1%d8%b1%d8%b3%db%8c-%d8%ae%d8%b7%d8%a7%d9%87%d8%a7%db%8c-%d9%85%d9%88%d8%b1%d8%af-%d8%a7%d9%86%d8%aa%d8%b8%d8%a7%d8%b1>#</a></h3><p>در بسیاری از مواقع، یک تابع در شرایط خاص باید خطا بازگرداند. تست صحیح باید این خطا را بررسی کرده و اطمینان حاصل کند که نوع خطا، پیام و زمان وقوع آن دقیقاً مطابق انتظار است.</p><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

func Divide(a, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("cannot divide by zero")
    }
    return a / b, nil
}

func TestDivideByZero(t *testing.T) {
    _, err := Divide(10, 0)
    if err == nil {
        t.Fatal("expected error, got nil")
    }
    if err.Error() != "cannot divide by zero" {
        t.Errorf("unexpected error message: %v", err)
    }
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><h3 id=7222-تست-موفقیت-در-غیاب-خطا>7.2.2.2 تست موفقیت در غیاب خطا
<a class=anchor href=#7222-%d8%aa%d8%b3%d8%aa-%d9%85%d9%88%d9%81%d9%82%db%8c%d8%aa-%d8%af%d8%b1-%d8%ba%db%8c%d8%a7%d8%a8-%d8%ae%d8%b7%d8%a7>#</a></h3><p>در طرف دیگر، باید اطمینان حاصل کنیم که در شرایط صحیح، تابع بدون خطا عمل می‌کند:</p><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

func Divide(a, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("cannot divide by zero")
    }
    return a / b, nil
}

func TestDivideSuccess(t *testing.T) {
    res, err := Divide(10, 2)
    if err != nil {
        t.Fatalf("unexpected error: %v", err)
    }
    if res != 5 {
        t.Errorf("expected 5, got %d", res)
    }
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><h3 id=7223-استفاده-از-errorsis-و-errorsas>7.2.2.3 استفاده از errors.Is و errors.As
<a class=anchor href=#7223-%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87-%d8%a7%d8%b2-errorsis-%d9%88-errorsas>#</a></h3><p>در شرایط حرفه‌ای، به‌جای بررسی پیام خطا، بهتر است از توابع استاندارد کتابخانه <code>errors</code> برای بررسی نوع خطا استفاده شود، خصوصاً زمانی که خطاها wrap می‌شوند.</p><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

var ErrDivideByZero = errors.New("cannot divide by zero")

func Divide(a, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("wrap: %w", ErrDivideByZero)
    }
    return a / b, nil
}

func TestDivideByZeroTypedError(t *testing.T) {
    _, err := Divide(1, 0)
    if !errors.Is(err, ErrDivideByZero) {
        t.Errorf("expected ErrDivideByZero, got %v", err)
    }
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><h3 id=7224-پوشش-تمامی-مسیرهای-منطقی>7.2.2.4 پوشش تمامی مسیرهای منطقی
<a class=anchor href=#7224-%d9%be%d9%88%d8%b4%d8%b4-%d8%aa%d9%85%d8%a7%d9%85%db%8c-%d9%85%d8%b3%db%8c%d8%b1%d9%87%d8%a7%db%8c-%d9%85%d9%86%d8%b7%d9%82%db%8c>#</a></h3><p>هر تابعی که دارای چند مسیر شرطی است، باید در تست‌های واحد به‌صورت جداگانه در تمامی مسیرها آزمایش شود. عدم پوشش یکی از مسیرها می‌تواند منجر به بروز باگ‌های پنهان در آینده شود.</p><p>برای مثال، تابع زیر دو مسیر دارد:</p><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

func Authenticate(token string) error {
    if token == "" {
        return errors.New("token required")
    }
    return nil
}

func TestAuthenticate(t *testing.T) {
    tests := []struct {
        name    string
        input   string
        wantErr bool
    }{
        {"valid token", "abc123", false},
        {"empty token", "", true},
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            err := Authenticate(tt.input)
            if (err != nil) != tt.wantErr {
                t.Errorf("unexpected error result. got error=%v", err)
            }
        })
    }
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><p>این تکنیک با نام <span class=tooltip data-tooltip="table-driven test" ontouchend=toggleTooltip(this)>تست جدول‌محور</span>
شناخته می‌شود و در بخش بعدی به‌صورت مفصل بررسی خواهد شد.</p><h2 id=723-تست-توابع-غیرصادرشده-unexported-و-کاربرد-پکیج-_test>7.2.3 تست توابع غیرصادرشده (Unexported) و کاربرد پکیج _test
<a class=anchor href=#723-%d8%aa%d8%b3%d8%aa-%d8%aa%d9%88%d8%a7%d8%a8%d8%b9-%d8%ba%db%8c%d8%b1%d8%b5%d8%a7%d8%af%d8%b1%d8%b4%d8%af%d9%87-unexported-%d9%88-%da%a9%d8%a7%d8%b1%d8%a8%d8%b1%d8%af-%d9%be%da%a9%db%8c%d8%ac-_test>#</a></h2><p>در Go، توابع یا انواعی که با حرف کوچک آغاز می‌شوند، تنها در محدوده همان پکیج قابل مشاهده هستند. این ویژگی در راستای اصل <strong>کپسوله‌سازی</strong> طراحی شده است. اما گاهی لازم است این توابع <strong>غیرصادرشده</strong> را نیز مورد تست قرار دهیم. برای این کار، چند رویکرد رایج وجود دارد که هرکدام بسته به هدف تست قابل انتخاب هستند.</p><h3 id=7231-نوشتن-تست-در-همان-پکیج>7.2.3.1 نوشتن تست در همان پکیج
<a class=anchor href=#7231-%d9%86%d9%88%d8%b4%d8%aa%d9%86-%d8%aa%d8%b3%d8%aa-%d8%af%d8%b1-%d9%87%d9%85%d8%a7%d9%86-%d9%be%da%a9%db%8c%d8%ac>#</a></h3><p>در ساده‌ترین حالت، فایل تست را در همان پکیجی می‌نویسیم که کد اصلی قرار دارد. این روش به تست دسترسی کامل به توابع، متغیرها و انواع داخلی را می‌دهد.</p><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

func subtract(a, b int) int {
    return a - b
}

func TestSubtract(t *testing.T) {
    if subtract(5, 3) != 2 {
        t.Errorf("expected 2, got %d", subtract(5, 3))
    }
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><p>این روش توصیه‌شده و رسمی‌ترین راه برای تست موارد غیرصادرشده است.</p><h3 id=7232-استفاده-از-پکیج-تست-جداگانه-_test>7.2.3.2 استفاده از پکیج تست جداگانه (_test)
<a class=anchor href=#7232-%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87-%d8%a7%d8%b2-%d9%be%da%a9%db%8c%d8%ac-%d8%aa%d8%b3%d8%aa-%d8%ac%d8%af%d8%a7%da%af%d8%a7%d9%86%d9%87-_test>#</a></h3><p>اگر بخواهیم تست‌ها کاملاً از رفتار داخلی جدا باشند و فقط از رابط عمومی (public API) استفاده کنند، می‌توانیم از یک پکیج با پسوند <code>_test</code> استفاده کنیم. این روش برای نوشتن تست‌های سطح بالاتر یا رفتاری مناسب است.</p><pre><code class=language-go>// file: api_test.go
package math_test

import (
    &quot;testing&quot;
    &quot;mymodule/math&quot;
)

func TestAddPublic(t *testing.T) {
    got := math.Add(1, 2)
    if got != 3 {
        t.Errorf(&quot;expected 3, got %d&quot;, got)
    }
}
</code></pre><p>در این حالت:</p><ul><li>توابع داخلی (مثل <code>subtract</code>) دیگر قابل دسترسی نیستند.</li><li>تنها توابع صادرشده در دسترس هستند.</li><li>این یک تست &ldquo;از بیرون&rdquo; یا &ldquo;black-box&rdquo; محسوب می‌شود.</li></ul><h3 id=7233-تست-غیرمستقیم-توابع-داخلی>7.2.3.3 تست غیرمستقیم توابع داخلی
<a class=anchor href=#7233-%d8%aa%d8%b3%d8%aa-%d8%ba%db%8c%d8%b1%d9%85%d8%b3%d8%aa%d9%82%db%8c%d9%85-%d8%aa%d9%88%d8%a7%d8%a8%d8%b9-%d8%af%d8%a7%d8%ae%d9%84%db%8c>#</a></h3><p>اگر تابع غیرصادرشده به‌صورت مستقیم قابل تست نیست ولی از طریق توابع صادرشده فراخوانی می‌شود، بهترین راه تست آن <strong>به‌صورت غیرمستقیم و از طریق خروجی تابع صادرشده</strong> است. به این ترتیب، تست به ساختار داخلی وابسته نخواهد بود.</p><p>مزیت این روش:</p><ul><li>تست پایدارتر باقی می‌ماند.</li><li>وابستگی به جزییات پیاده‌سازی کاهش می‌یابد.</li></ul><h3 id=7234-مزایا-و-معایب-هر-رویکرد>7.2.3.4 مزایا و معایب هر رویکرد
<a class=anchor href=#7234-%d9%85%d8%b2%d8%a7%db%8c%d8%a7-%d9%88-%d9%85%d8%b9%d8%a7%db%8c%d8%a8-%d9%87%d8%b1-%d8%b1%d9%88%db%8c%da%a9%d8%b1%d8%af>#</a></h3><table><thead><tr><th>روش</th><th>مزایا</th><th>معایب</th></tr></thead><tbody><tr><td>پکیج داخلی (<code>package x</code>)</td><td>دسترسی کامل به کد</td><td>وابستگی مستقیم به پیاده‌سازی</td></tr><tr><td>پکیج <code>_test</code></td><td>تست رفتاری و بدون وابستگی به داخل</td><td>عدم امکان تست مستقیم کد داخلی</td></tr><tr><td>تست غیرمستقیم</td><td>افزایش انعطاف تست و پایداری طولانی‌مدت</td><td>پوشش دقیق همه مسیرها ممکن نیست</td></tr></tbody></table><h3 id=7235-نکات-تجربی>7.2.3.5 نکات تجربی
<a class=anchor href=#7235-%d9%86%da%a9%d8%a7%d8%aa-%d8%aa%d8%ac%d8%b1%d8%a8%db%8c>#</a></h3><ul><li>تست توابع داخلی اگر رفتار پیچیده‌ای دارند، <strong>ضروری</strong> است.</li><li>اگر یک تابع داخلی توسط تابع صادرشده‌ای فراخوانی نمی‌شود، بهتر است به صورت مستقل در همان پکیج تست شود.</li><li>از پکیج <code>_test</code> در تست‌های <span class=tooltip data-tooltip="integration-like tests" ontouchend=toggleTooltip(this)>انتهایی</span>
یا برای نوشتن سناریوهای بلندمدت استفاده کنید.</li></ul><h2 id=724-نکات-کاربردی-و-اشتباهات-رایج-در-تستهای-واحد>7.2.4 نکات کاربردی و اشتباهات رایج در تست‌های واحد
<a class=anchor href=#724-%d9%86%da%a9%d8%a7%d8%aa-%da%a9%d8%a7%d8%b1%d8%a8%d8%b1%d8%af%db%8c-%d9%88-%d8%a7%d8%b4%d8%aa%d8%a8%d8%a7%d9%87%d8%a7%d8%aa-%d8%b1%d8%a7%db%8c%d8%ac-%d8%af%d8%b1-%d8%aa%d8%b3%d8%aa%d9%87%d8%a7%db%8c-%d9%88%d8%a7%d8%ad%d8%af>#</a></h2><p>یونیت تست‌نویسی در Go به دلیل سادگی و سرعت بالا، بسیار محبوب است؛ اما همین سادگی ممکن است باعث شود برخی نکات ظریف، اما مهم، نادیده گرفته شوند. در این بخش، مجموعه‌ای از توصیه‌های عملی و اشتباهات رایج در یونیت تست‌ها را مرور می‌کنیم که رعایت آن‌ها منجر به تست‌هایی دقیق‌تر، پایدارتر و قابل نگهداری‌تر خواهد شد.</p><h3 id=7241-تفاوت-بین-terror-و-tfatal-را-بشناسید>7.2.4.1 تفاوت بین t.Error و t.Fatal را بشناسید
<a class=anchor href=#7241-%d8%aa%d9%81%d8%a7%d9%88%d8%aa-%d8%a8%db%8c%d9%86-terror-%d9%88-tfatal-%d8%b1%d8%a7-%d8%a8%d8%b4%d9%86%d8%a7%d8%b3%db%8c%d8%af>#</a></h3><p>یکی از اشتباهات رایج، استفاده اشتباه از <code>t.Fatal</code> به‌جای <code>t.Error</code> یا بالعکس است.</p><ul><li>از <code>t.Error</code> زمانی استفاده کنید که می‌خواهید خطا را ثبت کنید ولی اجازه دهید تست ادامه پیدا کند.</li><li>از <code>t.Fatal</code> زمانی استفاده کنید که ادامه‌ی تست بی‌معنا است و باید بلافاصله متوقف شود.</li></ul><p>مثال:</p><pre><code class=language-go>if err != nil {
    t.Fatal(&quot;cannot continue test, error:&quot;, err)
}
if result != expected {
    t.Error(&quot;wrong result, got&quot;, result)
}
</code></pre><blockquote><p>اگر با یک خطای بحرانی مثل failure در ورودی مواجه شدید، <code>Fatal</code> مناسب‌تر است.</p></blockquote><h3 id=7242-از-timesleep-در-یونیت-تست-استفاده-نکنید>7.2.4.2 از time.Sleep در یونیت تست استفاده نکنید
<a class=anchor href=#7242-%d8%a7%d8%b2-timesleep-%d8%af%d8%b1-%db%8c%d9%88%d9%86%db%8c%d8%aa-%d8%aa%d8%b3%d8%aa-%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87-%d9%86%da%a9%d9%86%db%8c%d8%af>#</a></h3><p>استفاده از <code>time.Sleep</code> برای منتظر ماندن در تست باعث ایجاد تست‌های ناپایدار و کند می‌شود. به‌جای آن، از تکنیک‌های مبتنی بر کانال یا تکرارهای سریع (retry) استفاده کنید.</p><p>❌ بد:</p><pre><code class=language-go>time.Sleep(100 * time.Millisecond)
</code></pre><p>✅ بهتر:</p><pre><code class=language-go>for i := 0; i &lt; 100; i++ {
    if ready() {
        break
    }
    time.Sleep(1 * time.Millisecond)
}
</code></pre><h3 id=7243-تستهای-وابسته-به-زمان-را-کنترل-کنید>7.2.4.3 تست‌های وابسته به زمان را کنترل کنید
<a class=anchor href=#7243-%d8%aa%d8%b3%d8%aa%d9%87%d8%a7%db%8c-%d9%88%d8%a7%d8%a8%d8%b3%d8%aa%d9%87-%d8%a8%d9%87-%d8%b2%d9%85%d8%a7%d9%86-%d8%b1%d8%a7-%da%a9%d9%86%d8%aa%d8%b1%d9%84-%da%a9%d9%86%db%8c%d8%af>#</a></h3><p>تست‌هایی که از <code>time.Now()</code> یا <code>time.Since()</code> استفاده می‌کنند باید طوری طراحی شوند که قابل پیش‌بینی باقی بمانند. راهکار:</p><ul><li>تزریق زمان (dependency injection)</li><li>استفاده از clock mock</li></ul><h3 id=7244-از-ttempdir-برای-ساخت-فایل-موقت-استفاده-کنید>7.2.4.4 از <code>t.TempDir()</code> برای ساخت فایل‌ موقت استفاده کنید
<a class=anchor href=#7244-%d8%a7%d8%b2-ttempdir-%d8%a8%d8%b1%d8%a7%db%8c-%d8%b3%d8%a7%d8%ae%d8%aa-%d9%81%d8%a7%db%8c%d9%84-%d9%85%d9%88%d9%82%d8%aa-%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87-%da%a9%d9%86%db%8c%d8%af>#</a></h3><p>اگر تست نیاز به فایل یا پوشه موقتی دارد، به‌جای نوشتن مسیر دستی از <code>t.TempDir()</code> استفاده کنید:</p><pre><code class=language-go>func TestWriteFile(t *testing.T) {
    dir := t.TempDir()
    path := filepath.Join(dir, &quot;file.txt&quot;)
    _ = os.WriteFile(path, []byte(&quot;data&quot;), 0644)
    // فایل بعد از تست به‌صورت خودکار پاک می‌شود
}
</code></pre><h3 id=7245-مراقب-caching-ناخواسته-باشید>7.2.4.5 مراقب caching ناخواسته باشید
<a class=anchor href=#7245-%d9%85%d8%b1%d8%a7%d9%82%d8%a8-caching-%d9%86%d8%a7%d8%ae%d9%88%d8%a7%d8%b3%d8%aa%d9%87-%d8%a8%d8%a7%d8%b4%db%8c%d8%af>#</a></h3><p>هنگام اجرای مکرر تست‌ها، اگر خروجی تست‌ها در حال تغییر باشد، ممکن است به دلیل کش شدن نتیجه، نتیجه قبلی دوباره نمایش داده شود. برای جلوگیری:</p><pre><code class=language-bash>go test -count=1
</code></pre><p>یا پاک‌سازی کامل کش:</p><pre><code class=language-bash>go clean -testcache
</code></pre><h3 id=7246-تست-نباید-فقط-تابع-را-صدا-بزند>7.2.4.6 تست نباید فقط تابع را صدا بزند
<a class=anchor href=#7246-%d8%aa%d8%b3%d8%aa-%d9%86%d8%a8%d8%a7%db%8c%d8%af-%d9%81%d9%82%d8%b7-%d8%aa%d8%a7%d8%a8%d8%b9-%d8%b1%d8%a7-%d8%b5%d8%af%d8%a7-%d8%a8%d8%b2%d9%86%d8%af>#</a></h3><p>یونیت تست‌هایی که تنها تابع را اجرا می‌کنند ولی هیچ بررسی‌ای انجام نمی‌دهند، بی‌فایده‌اند.</p><p>❌ بد:</p><pre><code class=language-go>func TestNoCheck(t *testing.T) {
    DoSomething()
}
</code></pre><p>✅ درست:</p><pre><code class=language-go>func TestDoSomething(t *testing.T) {
    result := DoSomething()
    if result != expected {
        t.Errorf(&quot;expected %v, got %v&quot;, expected, result)
    }
}
</code></pre><h3 id=7247-گزارشدهی-دقیق-بنویسید>7.2.4.7 گزارش‌دهی دقیق بنویسید
<a class=anchor href=#7247-%da%af%d8%b2%d8%a7%d8%b1%d8%b4%d8%af%d9%87%db%8c-%d8%af%d9%82%db%8c%d9%82-%d8%a8%d9%86%d9%88%db%8c%d8%b3%db%8c%d8%af>#</a></h3><p>در هنگام ثبت خطا با <code>t.Errorf</code> یا <code>t.Fatalf</code>، حتماً اطلاعات کامل بدهید:</p><pre><code class=language-go>t.Errorf(&quot;expected %d, got %d&quot;, want, got)
</code></pre><p>این کار در زمان تحلیل خروجی تست‌ها بسیار مفید است.</p><h3 id=7248-نامگذاری-مناسب-تستها>7.2.4.8 نام‌گذاری مناسب تست‌ها
<a class=anchor href=#7248-%d9%86%d8%a7%d9%85%da%af%d8%b0%d8%a7%d8%b1%db%8c-%d9%85%d9%86%d8%a7%d8%b3%d8%a8-%d8%aa%d8%b3%d8%aa%d9%87%d8%a7>#</a></h3><p>نام تست باید گویای هدف تست باشد:</p><pre><code class=language-go>func TestDivideByZeroReturnsError(t *testing.T) { ... }
func TestAddPositiveNumbers(t *testing.T) { ... }
</code></pre><p>از نام‌هایی مثل <code>Test1</code>, <code>TestA</code>, <code>TestXYZ</code> اجتناب کنید.</p><h2 id=725-تست-واحد-برای-ساختارها-و-متدهای-hahahugoshortcode178s10hbhb>7.2.5 تست واحد برای ساختارها و متدهای <span class=tooltip data-tooltip="receiver methods" ontouchend=toggleTooltip(this)>گیرنده</span>
<a class=anchor href=#725-%d8%aa%d8%b3%d8%aa-%d9%88%d8%a7%d8%ad%d8%af-%d8%a8%d8%b1%d8%a7%db%8c-%d8%b3%d8%a7%d8%ae%d8%aa%d8%a7%d8%b1%d9%87%d8%a7-%d9%88-%d9%85%d8%aa%d8%af%d9%87%d8%a7%db%8c-hahahugoshortcode178s10hbhb>#</a></h2><p>در زبان Go، بسیاری از قابلیت‌های سطح بالا از طریق متدهایی روی ساختارها (structs) پیاده‌سازی می‌شوند. این متدها بسته به نوع گیرنده‌شان (<code>value receiver</code> یا <code>pointer receiver</code>) و میزان وابستگی‌شان به وضعیت داخلی ساختار، نیاز به طراحی تست دقیق‌تری دارند.</p><p>در این بخش، بررسی می‌کنیم که چگونه می‌توان به صورت مؤثر برای متدهای متصل به ساختارها تست واحد نوشت.</p><h3 id=7251-تست-متدهای-گیرنده-مقداری-value-receiver>7.2.5.1 تست متدهای گیرنده مقداری (value receiver)
<a class=anchor href=#7251-%d8%aa%d8%b3%d8%aa-%d9%85%d8%aa%d8%af%d9%87%d8%a7%db%8c-%da%af%db%8c%d8%b1%d9%86%d8%af%d9%87-%d9%85%d9%82%d8%af%d8%a7%d8%b1%db%8c-value-receiver>#</a></h3><p>اگر متدی گیرنده مقداری دارد، معمولاً روی یک نسخه‌ی کپی‌شده از ساختار عمل می‌کند و تغییری در وضعیت اصلی ایجاد نمی‌کند. تست چنین متدهایی بسیار ساده است.</p><p>مثال:</p><pre><code class=language-go>type Point struct {
	X, Y int
}

func (p Point) IsOrigin() bool {
	return p.X == 0 &amp;&amp; p.Y == 0
}
</code></pre><p>تست:</p><pre><code class=language-go>func TestPoint_IsOrigin(t *testing.T) {
	p := Point{X: 0, Y: 0}
	if !p.IsOrigin() {
		t.Error(&quot;expected true, got false&quot;)
	}
}
</code></pre><h3 id=7252-تست-متدهای-گیرنده-اشارهگری-pointer-receiver>7.2.5.2 تست متدهای گیرنده اشاره‌گری (pointer receiver)
<a class=anchor href=#7252-%d8%aa%d8%b3%d8%aa-%d9%85%d8%aa%d8%af%d9%87%d8%a7%db%8c-%da%af%db%8c%d8%b1%d9%86%d8%af%d9%87-%d8%a7%d8%b4%d8%a7%d8%b1%d9%87%da%af%d8%b1%db%8c-pointer-receiver>#</a></h3><p>اگر متد وضعیت داخلی ساختار را تغییر می‌دهد یا به صورت اشاره‌گری تعریف شده، در تست باید دقت بیشتری کرد.</p><p>مثال:</p><pre><code class=language-go>func (p *Point) Move(dx, dy int) {
	p.X += dx
	p.Y += dy
}
</code></pre><p>تست:</p><pre><code class=language-go>func TestPoint_Move(t *testing.T) {
	p := &amp;Point{X: 1, Y: 2}
	p.Move(3, 4)
	if p.X != 4 || p.Y != 6 {
		t.Errorf(&quot;expected (4,6), got (%d,%d)&quot;, p.X, p.Y)
	}
}
</code></pre><blockquote><p><strong>توجه:</strong> حتماً باید از اشاره‌گر (<code>&amp;Point{...}</code>) استفاده شود، چون متد روی pointer تعریف شده است.</p></blockquote><h3 id=7253-تست-چند-متد-روی-یک-نمونه>7.2.5.3 تست چند متد روی یک نمونه
<a class=anchor href=#7253-%d8%aa%d8%b3%d8%aa-%da%86%d9%86%d8%af-%d9%85%d8%aa%d8%af-%d8%b1%d9%88%db%8c-%db%8c%da%a9-%d9%86%d9%85%d9%88%d9%86%d9%87>#</a></h3><p>اگر چند متد متوالی روی یک نمونه اعمال می‌شود (تغییر وضعیت گام‌به‌گام)، بهتر است تست در قالب <strong>subtest</strong> یا <strong>جدول تست</strong> طراحی شود تا خوانایی حفظ شود.</p><pre><code class=language-go>func TestPoint_Sequence(t *testing.T) {
	p := &amp;Point{}
	t.Run(&quot;Move&quot;, func(t *testing.T) {
		p.Move(2, 2)
	})
	t.Run(&quot;Check&quot;, func(t *testing.T) {
		if p.X != 2 || p.Y != 2 {
			t.Errorf(&quot;expected (2,2), got (%d,%d)&quot;, p.X, p.Y)
		}
	})
}
</code></pre><h3 id=7254-جداسازی-لایه-logic-از-state>7.2.5.4 جداسازی لایه logic از state
<a class=anchor href=#7254-%d8%ac%d8%af%d8%a7%d8%b3%d8%a7%d8%b2%db%8c-%d9%84%d8%a7%db%8c%d9%87-logic-%d8%a7%d8%b2-state>#</a></h3><p>در پروژه‌های واقعی، اگر متد ساختار منطق پیچیده دارد، توصیه می‌شود محاسبات را از وضعیت جدا کرده و در توابع مستقل pure قرار دهید تا تست‌پذیرتر شود.</p><p>مثال بهینه‌شده:</p><pre><code class=language-go>func calculateNewPosition(x, y, dx, dy int) (int, int) {
	return x + dx, y + dy
}
</code></pre><p>این تابع را می‌توان به راحتی در یونیت تست مستقل بررسی کرد، بدون نیاز به ساختار.</p><h3 id=7255-رفتار-پیشفرض-در-مقادیر-تهی-zero-value>7.2.5.5 رفتار پیش‌فرض در مقادیر تهی (zero value)
<a class=anchor href=#7255-%d8%b1%d9%81%d8%aa%d8%a7%d8%b1-%d9%be%db%8c%d8%b4%d9%81%d8%b1%d8%b6-%d8%af%d8%b1-%d9%85%d9%82%d8%a7%d8%af%db%8c%d8%b1-%d8%aa%d9%87%db%8c-zero-value>#</a></h3><p>در Go، مقدار پیش‌فرض (zero value) برای structها معتبر است و معمولاً باید بتوان از آن استفاده کرد. تست این رفتار برای ساختارهایی که متد دارند مهم است.</p><pre><code class=language-go>func TestZeroValueBehavior(t *testing.T) {
	var p Point
	if !p.IsOrigin() {
		t.Error(&quot;expected origin from zero value&quot;)
	}
}
</code></pre><h3 id=7256-ترکیب-متد-و-خطا>7.2.5.6 ترکیب متد و خطا
<a class=anchor href=#7256-%d8%aa%d8%b1%da%a9%db%8c%d8%a8-%d9%85%d8%aa%d8%af-%d9%88-%d8%ae%d8%b7%d8%a7>#</a></h3><p>در صورتی که متدی روی struct خطا بازمی‌گرداند، حتماً باید شرایط موفق/ناموفق را تست کنید:</p><div class=go-playground><pre class=line-numbers><code class=language-go>package main

import (
	"fmt"
	"testing"
)

type User struct {
	Email string
}

func (u *User) Validate() error {
	if u.Email == "" {
		return errors.New("email required")
	}
	return nil
}

func TestUser_Validate(t *testing.T) {
	tests := []struct {
		email   string
		wantErr bool
	}{
		{"", true},
		{"hello@example.com", false},
	}

	for _, tt := range tests {
		u := &User{Email: tt.email}
		err := u.Validate()
		if (err != nil) != tt.wantErr {
			t.Errorf("unexpected error state for email %q", tt.email)
		}
	}
}</code></pre><button class=run-code>▶ اجرای کد</button>
<button class=copy-code>کپی</button>
<button class=hide-output>✖ بستن خروجی</button><pre class="run-output hidden"></pre></div><h2 id=726-تفکیک-تستهای-سریع-و-آهسته-با--short>7.2.6 تفکیک تست‌های سریع و آهسته با -short
<a class=anchor href=#726-%d8%aa%d9%81%da%a9%db%8c%da%a9-%d8%aa%d8%b3%d8%aa%d9%87%d8%a7%db%8c-%d8%b3%d8%b1%db%8c%d8%b9-%d9%88-%d8%a2%d9%87%d8%b3%d8%aa%d9%87-%d8%a8%d8%a7--short>#</a></h2><p>در پروژه‌های واقعی، برخی تست‌ها بسیار سریع هستند و بلافاصله اجرا می‌شوند، اما برخی دیگر—به‌دلایل مختلفی مانند تعامل با فایل، شبکه، زمان‌سنجی، یا دیتابیس—کندتر هستند و ممکن است زمان‌بر یا شکننده (flaky) باشند. ابزار <code>go test</code> راهکاری ساده برای تفکیک این دو نوع تست فراهم کرده است: استفاده از فلگ <code>-short</code>.</p><p>هنگامی که دستور زیر اجرا می‌شود:</p><pre><code class=language-bash>go test -short
</code></pre><p>آرگومان <code>-short</code> به تمامی توابع تست به‌صورت خودکار ارسال می‌شود. سپس داخل کد می‌توان با استفاده از متد <code>testing.Short()</code> بررسی کرد که آیا این تست باید اجرا شود یا رد شود.</p><h3 id=7261-مثال-کاربردی>7.2.6.1 مثال کاربردی
<a class=anchor href=#7261-%d9%85%d8%ab%d8%a7%d9%84-%da%a9%d8%a7%d8%b1%d8%a8%d8%b1%d8%af%db%8c>#</a></h3><pre><code class=language-go>func TestSlowOperation(t *testing.T) {
	if testing.Short() {
		t.Skip(&quot;skipping slow test in short mode&quot;)
	}

	time.Sleep(5 * time.Second) // تست کند
	t.Log(&quot;test completed&quot;)
}
</code></pre><p>در اجرای معمولی:</p><pre><code class=language-bash>go test
</code></pre><p>تست اجرا می‌شود. اما در حالت short:</p><pre><code class=language-bash>go test -short
</code></pre><p>خروجی:</p><pre><code>--- SKIP: TestSlowOperation (0.00s)
    slow_test.go:4: skipping slow test in short mode
PASS
</code></pre><h3 id=7262-مزایا>7.2.6.2 مزایا
<a class=anchor href=#7262-%d9%85%d8%b2%d8%a7%db%8c%d8%a7>#</a></h3><ul><li>اجرای سریع‌تر تست‌ها در حالت پیش‌فرض</li><li>مناسب برای CI pipelines سبک یا اجراهای local</li><li>حذف تست‌هایی که به منابع خارجی یا شرایط خاص نیاز دارند</li></ul><h3 id=7263-نکته-مهم>7.2.6.3 نکته مهم
<a class=anchor href=#7263-%d9%86%da%a9%d8%aa%d9%87-%d9%85%d9%87%d9%85>#</a></h3><p>بهتر است تست‌های کند را <strong>با شرط <code>testing.Short()</code> کنترل کنید</strong> نه اینکه به‌طور کلی حذف‌شان کنید یا در فایل جداگانه بگذارید. این کار نگهداری و اجرای تست‌ها را انعطاف‌پذیرتر می‌کند.</p><h3 id=7264-ترکیب-با-ابزارهای-دیگر>7.2.6.4 ترکیب با ابزارهای دیگر
<a class=anchor href=#7264-%d8%aa%d8%b1%da%a9%db%8c%d8%a8-%d8%a8%d8%a7-%d8%a7%d8%a8%d8%b2%d8%a7%d8%b1%d9%87%d8%a7%db%8c-%d8%af%db%8c%da%af%d8%b1>#</a></h3><p>در سیستم‌های CI/CD، می‌توان دو مرحله اجرای تست داشت:</p><pre><code class=language-bash>go test -short ./...       # فقط تست‌های سریع
go test ./...              # همه تست‌ها (مثلاً فقط در زمان انتشار نسخه)
</code></pre></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/GoFarsi/book/edit/main/content/chapter%207/7.2-unit-testing.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>این صفحه را ویرایش کنید</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class="text-left page-navigation"><a href=/chapter-7/go-table-driven-tests/>7.3 تست جدول‌محور (Table-Driven Test) ◀︎</a></div><script>function toggleTooltip(e){e.classList.toggle("active")}</script><div id=graphcomment></div><script type=text/javascript>var __semio__params={graphcommentId:"book",behaviour:{}};function __semio__onload(){__semio__gc_graphlogin(__semio__params)}(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=__semio__onload,e.defer=!0,e.src="https://integration.graphcomment.com/gc_graphlogin.js?"+Date.now(),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content></br><main><div class=wrapper><a href=https://t.me/GolangEngineers class="icon telegram" target=_blank><div class=tooltip>گروه تلگرامی مهندسین گولنگ</div><span><i class="fab fa-telegram"></i></span>
</a><a href=https://linkedin.com/in/Ja7ad class="icon linkedin" target=_blank><div class=tooltip>لینکدین نویسنده</div><span><i class="fab fa-linkedin"></i></span>
</a><a href=https://twitter.com/Ja7adR class="icon twitter" target=_blank><div class=tooltip>توییتر نویسنده</div><span><i class="fab fa-twitter"></i></span></a></div></main></br></br><nav id=TableOfContents><ul><li><ul><li><a href=#721-اصول-نوشتن-تستهای-واحد-در-go-و-ساختار-آنها>7.2.1 اصول نوشتن تست‌های واحد در Go و ساختار آن‌ها</a><ul><li><a href=#7211-ساختار-پایه-تست-واحد>7.2.1.1 ساختار پایه تست واحد</a></li><li><a href=#7212-نقش-تابع-tfail-terror-و-tfatal>7.2.1.2 نقش تابع <code>t.Fail</code>, <code>t.Error</code>, و <code>t.Fatal</code></a></li><li><a href=#7213-الزامات-ابزار-go-test>7.2.1.3 الزامات ابزار go test</a></li><li><a href=#7214-نحوه-سازماندهی-فایلها-و-پوشهها>7.2.1.4 نحوه سازمان‌دهی فایل‌ها و پوشه‌ها</a></li><li><a href=#7215-اجرای-تست>7.2.1.5 اجرای تست</a></li><li><a href=#7216-چرا-این-ساختار-موفق-است>7.2.1.6 چرا این ساختار موفق است؟</a></li></ul></li><li><a href=#722-روشهای-مدیریت-خطا-در-تستها>7.2.2 روش‌های مدیریت خطا در تست‌ها</a><ul><li><a href=#7221-بررسی-خطاهای-مورد-انتظار>7.2.2.1 بررسی خطاهای مورد انتظار</a></li><li><a href=#7222-تست-موفقیت-در-غیاب-خطا>7.2.2.2 تست موفقیت در غیاب خطا</a></li><li><a href=#7223-استفاده-از-errorsis-و-errorsas>7.2.2.3 استفاده از errors.Is و errors.As</a></li><li><a href=#7224-پوشش-تمامی-مسیرهای-منطقی>7.2.2.4 پوشش تمامی مسیرهای منطقی</a></li></ul></li><li><a href=#723-تست-توابع-غیرصادرشده-unexported-و-کاربرد-پکیج-_test>7.2.3 تست توابع غیرصادرشده (Unexported) و کاربرد پکیج _test</a><ul><li><a href=#7231-نوشتن-تست-در-همان-پکیج>7.2.3.1 نوشتن تست در همان پکیج</a></li><li><a href=#7232-استفاده-از-پکیج-تست-جداگانه-_test>7.2.3.2 استفاده از پکیج تست جداگانه (_test)</a></li><li><a href=#7233-تست-غیرمستقیم-توابع-داخلی>7.2.3.3 تست غیرمستقیم توابع داخلی</a></li><li><a href=#7234-مزایا-و-معایب-هر-رویکرد>7.2.3.4 مزایا و معایب هر رویکرد</a></li><li><a href=#7235-نکات-تجربی>7.2.3.5 نکات تجربی</a></li></ul></li><li><a href=#724-نکات-کاربردی-و-اشتباهات-رایج-در-تستهای-واحد>7.2.4 نکات کاربردی و اشتباهات رایج در تست‌های واحد</a><ul><li><a href=#7241-تفاوت-بین-terror-و-tfatal-را-بشناسید>7.2.4.1 تفاوت بین t.Error و t.Fatal را بشناسید</a></li><li><a href=#7242-از-timesleep-در-یونیت-تست-استفاده-نکنید>7.2.4.2 از time.Sleep در یونیت تست استفاده نکنید</a></li><li><a href=#7243-تستهای-وابسته-به-زمان-را-کنترل-کنید>7.2.4.3 تست‌های وابسته به زمان را کنترل کنید</a></li><li><a href=#7244-از-ttempdir-برای-ساخت-فایل-موقت-استفاده-کنید>7.2.4.4 از <code>t.TempDir()</code> برای ساخت فایل‌ موقت استفاده کنید</a></li><li><a href=#7245-مراقب-caching-ناخواسته-باشید>7.2.4.5 مراقب caching ناخواسته باشید</a></li><li><a href=#7246-تست-نباید-فقط-تابع-را-صدا-بزند>7.2.4.6 تست نباید فقط تابع را صدا بزند</a></li><li><a href=#7247-گزارشدهی-دقیق-بنویسید>7.2.4.7 گزارش‌دهی دقیق بنویسید</a></li><li><a href=#7248-نامگذاری-مناسب-تستها>7.2.4.8 نام‌گذاری مناسب تست‌ها</a></li></ul></li><li><a href=#725-تست-واحد-برای-ساختارها-و-متدهای-hahahugoshortcode178s10hbhb>7.2.5 تست واحد برای ساختارها و متدهای HAHAHUGOSHORTCODE178s10HBHB</a><ul><li><a href=#7251-تست-متدهای-گیرنده-مقداری-value-receiver>7.2.5.1 تست متدهای گیرنده مقداری (value receiver)</a></li><li><a href=#7252-تست-متدهای-گیرنده-اشارهگری-pointer-receiver>7.2.5.2 تست متدهای گیرنده اشاره‌گری (pointer receiver)</a></li><li><a href=#7253-تست-چند-متد-روی-یک-نمونه>7.2.5.3 تست چند متد روی یک نمونه</a></li><li><a href=#7254-جداسازی-لایه-logic-از-state>7.2.5.4 جداسازی لایه logic از state</a></li><li><a href=#7255-رفتار-پیشفرض-در-مقادیر-تهی-zero-value>7.2.5.5 رفتار پیش‌فرض در مقادیر تهی (zero value)</a></li><li><a href=#7256-ترکیب-متد-و-خطا>7.2.5.6 ترکیب متد و خطا</a></li></ul></li><li><a href=#726-تفکیک-تستهای-سریع-و-آهسته-با--short>7.2.6 تفکیک تست‌های سریع و آهسته با -short</a><ul><li><a href=#7261-مثال-کاربردی>7.2.6.1 مثال کاربردی</a></li><li><a href=#7262-مزایا>7.2.6.2 مزایا</a></li><li><a href=#7263-نکته-مهم>7.2.6.3 نکته مهم</a></li><li><a href=#7264-ترکیب-با-ابزارهای-دیگر>7.2.6.4 ترکیب با ابزارهای دیگر</a></li></ul></li></ul></li></ul></nav></div></aside></main><button onclick=topFunction() id=myBtn title="رفتن به بالا" class="fas fa-solid fa-arrow-up"></button>
<script src=prism.js></script><script>document.getElementById("currentsv").innerHTML=window.location.href</script><script async>var html=document.documentElement,switcher=document.getElementsByClassName("js-toggle")[0];typeof Storage!="undefined"&&((localStorage.getItem("themeMode")=="dark"||document.documentElement.getAttribute("data-theme")=="dark")&&switcher.classList.add("js-toggle--checked"),switcher.classList.add("js-toggle--focus")),switcher.addEventListener("click",function(){this.classList.toggle("js-toggle--checked"),this.classList.add("js-toggle--focus"),this.classList.contains("js-toggle--checked")?(html.setAttribute("data-theme","dark"),localStorage.setItem("themeMode","dark")):(html.setAttribute("data-theme","light"),localStorage.setItem("themeMode","light"))})</script><script>let mybutton=document.getElementById("myBtn");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script src=/js/playground.js defer></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-go.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js></script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script></body></html>